(this["webpackJsonpxd-for-browser"]=this["webpackJsonpxd-for-browser"]||[]).push([[0],{102:function(e,t,n){},133:function(e,t){},167:function(e,t,n){"use strict";n.r(t);n(102);var r,i,o,a=n(76),s=n(3);!function(e){e[e.Select=0]="Select",e[e.Rectangle=1]="Rectangle",e[e.Ellipse=2]="Ellipse",e[e.Polygon=3]="Polygon",e[e.Line=4]="Line",e[e.Pen=5]="Pen",e[e.Text=6]="Text",e[e.Artboard=7]="Artboard",e[e.Zoom=8]="Zoom"}(r||(r={})),function(e){e[e.Assets=0]="Assets",e[e.Layers=1]="Layers"}(i||(i={})),function(e){e[e.Main=0]="Main",e[e.Auxiliary=1]="Auxiliary",e[e.Secondary=2]="Secondary",e[e.Fourth=3]="Fourth",e[e.Fifth=4]="Fifth"}(o||(o={}));var c=n(0),l=n.n(c),u=n(11),d=n(12),h=n(16),f=n(36),v=n.n(f),m=n(52),g=n.n(m),p=n(77),b=n(170);function y(e){var t=window.devicePixelRatio||1,n=e.getBoundingClientRect();e.width=n.width*t,e.height=n.height*t;var r=e.getContext("2d");return null===r||void 0===r||r.scale(t,t),r}var w=function(e,t){return b.c([[1,0,e],[0,1,t],[0,0,1]])},x=function(e){return e/180*Math.PI},E=function(e){return e/Math.PI*180},O=function(){function e(t){var n=this;Object(u.a)(this,e),this.containerElement=void 0,this.canvasElement=void 0,this.canvasCtx2D=void 0,this.elements=[],this.eventEmitter=new g.a,this.backgroundColor=new v.a("#fff"),this.canvasResizeObserver=new p.a((function(e){var t,r=Object(h.a)(e);try{for(r.s();!(t=r.n()).done;){t.value.target===n.canvasElement&&(n.resizeCanvas(),n.eventEmitter.emit("resize",{type:"resize",target:n.canvasElement}))}}catch(i){r.e(i)}finally{r.f()}})),this.containerElement=t,this.canvasElement=document.createElement("canvas"),this.canvasElement.setAttribute("style","display: block; width: 100%; height: 100%"),this.containerElement.appendChild(this.canvasElement),this.canvasCtx2D=y(this.canvasElement),this.resizeCanvas(),this.listenCanvasDomEvents(),this.canvasResizeObserver.observe(this.canvasElement)}return Object(d.a)(e,null,[{key:"init",value:function(t){return new e(t)}}]),Object(d.a)(e,[{key:"setBackgroundColor",value:function(e){this.backgroundColor=new v.a(e)}},{key:"resizeCanvas",value:function(){this.canvasCtx2D=y(this.canvasElement)}},{key:"render",value:function(){var e=this.canvasElement.getBoundingClientRect();this.canvasCtx2D.save(),this.canvasCtx2D.fillStyle=this.backgroundColor.string(),this.canvasCtx2D.fillRect(0,0,e.width,e.height),this.canvasCtx2D.restore();for(var t=this.elements.length-1;t>=0;t--){this.elements[t].render()}}},{key:"add",value:function(e){e.gRender=this,this.elements.unshift(e)}},{key:"remove",value:function(e){var t=this.elements.indexOf(e);-1!==t&&this.elements.splice(t,1)}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"getElementFromPoint",value:function(e){var t,n=Object(h.a)(this.elements);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.isInnerPoint(e))return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"listenCanvasDomEvents",value:function(){var e=this;["click","mousedown","mouseup","mousemove"].forEach((function(t){e.canvasElement.addEventListener(t,(function(n){var r=e.canvasElement.getBoundingClientRect(),i={x:n.clientX-r.x,y:n.clientY-r.y},o=e.getElementFromPoint(i);null===o||void 0===o||o.emit(t,{type:t,target:o,browserMouseEvent:n}),e.eventEmitter.emit(t,{type:t,target:o,browserMouseEvent:n})}))}))}}]),e}(),j=n(6),S=n(47),k=n(51),D=n(53),M=n.n(D),C=function(){function e(){Object(u.a)(this,e),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}return Object(d.a)(e,[{key:"toMatrix",value:function(){return Object(b.c)([[this.a,this.c,this.tx],[this.b,this.d,this.ty],[0,0,1]])}},{key:"multiply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right",n="left"===t?Object(b.d)(e,this.toMatrix()):Object(b.d)(this.toMatrix(),e);this.a=n.get([0,0]),this.b=n.get([1,0]),this.c=n.get([0,1]),this.d=n.get([1,1]),this.tx=n.get([0,2]),this.ty=n.get([1,2])}}]),e}(),T=function e(){Object(u.a)(this,e),this.fill=void 0,this.stroke=void 0,this.fill=new R,this.stroke=new z},R=function(){function e(){Object(u.a)(this,e),this.type=void 0,this.color=void 0,this.gradient=void 0}return Object(d.a)(e,[{key:"setColor",value:function(e){this.color=new v.a(e)}},{key:"toCanvasFillStyle",value:function(e,t){var n,r;switch(this.type){case"gradient":var i=t.getBoundingBox().getTransformed(),o=i.width,a=i.height,s=new C;return s.a=o,s.d=a,null===(n=this.gradient)||void 0===n?void 0:n.toCanvasGradient(e,s);case"solid":return null===(r=this.color)||void 0===r?void 0:r.string();case"none":return}}}]),e}(),z=function(){function e(){Object(u.a)(this,e),this.type=void 0,this.color=void 0,this.gradient=void 0,this.width=1}return Object(d.a)(e,[{key:"setColor",value:function(e){this.color=new v.a(e)}},{key:"toCanvasStrokeStyle",value:function(e,t){var n,r;switch(this.type){case"gradient":var i=t.getBoundingBox().getTransformed(),o=i.width,a=i.height,s=new C;return s.a=o,s.d=a,null===(n=this.gradient)||void 0===n?void 0:n.toCanvasGradient(e,s);case"solid":return null===(r=this.color)||void 0===r?void 0:r.string();case"none":return}}}]),e}(),B=function(){function e(){Object(u.a)(this,e),this.stops=[]}return Object(d.a)(e,[{key:"addColorStop",value:function(e,t){var n=new v.a(t);this.stops.push({offset:e,color:n})}}]),e}(),A=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e,r,i,o){var a;return Object(u.a)(this,n),(a=t.call(this)).x1=e,a.y1=r,a.x2=i,a.y2=o,a}return Object(d.a)(n,[{key:"toCanvasGradient",value:function(e,t){var n=this.x1,r=this.y1,i=this.x2,o=this.y2;if(t){var a=Object(b.d)(t.toMatrix(),[n,r,1]).toArray(),s=Object(j.a)(a,2);n=s[0],r=s[1];var c=Object(b.d)(t.toMatrix(),[i,o,1]).toArray(),l=Object(j.a)(c,2);i=l[0],o=l[1]}var u=e.createLinearGradient(n,r,i,o);return this.stops.forEach((function(e){u.addColorStop(e.offset,e.color.string())})),u}}]),n}(B),P=function(){function e(){Object(u.a)(this,e),this.visible=!0,this.style=new T,this.transform=new C,this.rotation=0,this.gRender=void 0,this.eventEmitter=new g.a,this.name=void 0,this.type=void 0}return Object(d.a)(e,[{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"emit",value:function(e,t){this.eventEmitter.emit(e,t)}},{key:"remove",value:function(){var e;this.eventEmitter.removeAllListeners(),null===(e=this.gRender)||void 0===e||e.remove(this)}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"updateTransform",value:function(e){Object.assign(this.transform,e),this.emit("boundingChange",{type:"boundingChange",target:this})}}]),e}(),X=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new C;Object(u.a)(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.transform=o}return Object(d.a)(e,[{key:"getTransformed",value:function(){var e=[this.x,this.y,1],t=[this.x+this.width,this.y,1],n=[this.x+this.width,this.y+this.height,1],r=[this.x,this.y+this.height,1],i=this.transform.toMatrix(),o=Object(b.d)(i,e).toArray(),a=Object(b.d)(i,t).toArray(),s=Object(b.d)(i,n).toArray(),c=Object(b.d)(i,r).toArray();return{x:Math.min(o[0],a[0],s[0],c[0]),y:Math.min(o[1],a[1],s[1],c[1]),width:Math.pow(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2),.5),height:Math.pow(Math.pow(o[0]-c[0],2)+Math.pow(o[1]-c[1],2),.5)}}}]),e}(),L=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e,r,i,o){var a;return Object(u.a)(this,n),(a=t.call(this)).x=e,a.y=r,a.width=i,a.height=o,a.type=void 0,a._name="",a.type="shape",a}return Object(d.a)(n,[{key:"render",value:function(){var e,t,n,r,i;if(this.visible){var o=null===(e=this.gRender)||void 0===e?void 0:e.canvasCtx2D;if(o){o.save(),o.transform(this.transform.a,this.transform.b,this.transform.c,this.transform.d,this.transform.tx,this.transform.ty);var a,s,c=null===(t=this.style)||void 0===t||null===(n=t.stroke)||void 0===n?void 0:n.toCanvasStrokeStyle(o,this);if(c)o.strokeStyle=c,o.lineWidth=(null===(a=this.style)||void 0===a||null===(s=a.stroke)||void 0===s?void 0:s.width)||1,o.strokeRect(this.x,this.y,this.width,this.height);var l=null===(r=this.style)||void 0===r||null===(i=r.fill)||void 0===i?void 0:i.toCanvasFillStyle(o,this);l&&(o.fillStyle=l,o.fillRect(this.x,this.y,this.width,this.height)),o.restore()}}}},{key:"update",value:function(){}},{key:"updatePosition",value:function(e){this.x===e.x&&this.y===e.y||(this.x=e.x,this.y=e.y,this.emitBoundingChangeEvent())}},{key:"isInnerPoint",value:function(e){var t=[e.x,e.y,1],n=Object(b.b)(this.transform.toMatrix()),r=Object(b.d)(n,t);return function(e,t){var n=0;return t.reduce((function(t,r){if(t.y===r.y)return r;if(e.y<=Math.min(t.y,r.y))return r;if(e.y>Math.max(t.y,r.y))return r;var i=(e.y-t.y)*(t.x-r.x)/(t.y-r.y)+t.x,o=r.y<t.y;return i>e.x&&(o?n++:n--),r}),t[t.length-1]),0!==n}({x:r.get([0]),y:r.get([1])},[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height},{x:this.x,y:this.y}])}},{key:"toJSON",value:function(){return{name:this.name,type:this.type,x:this.x,y:this.y,width:this.width,height:this.height,visible:this.visible,style:this.style,transform:this.transform}}},{key:"getBoundingBox",value:function(){return new X(this.x,this.y,this.width,this.height,M.a.clone(this.transform))}},{key:"setRotate",value:function(e){var t=e-this.rotation;Math.abs(t)>Number.EPSILON&&(this.rotate(t),this.rotation=e%(2*Math.PI))}},{key:"rotate",value:function(e,t){if(!t){var n=[this.x+this.width/2,this.y+this.height/2,1],r=Object(b.d)(this.transform.toMatrix(),n).toArray(),i=Object(j.a)(r,2);t={x:i[0],y:i[1]}}var o=t.x,a=t.y,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return b.d(e,t)}))}(w(o,a),function(e){return b.c([[b.a(e),-b.e(e),0],[b.e(e),b.a(e),0],[0,0,1]])}(e),w(-o,-a));this.transform.multiply(s,"left"),this.emitBoundingChangeEvent()}},{key:"emitBoundingChangeEvent",value:function(){this.emit("boundingChange",{type:"boundingChange",target:this})}},{key:"name",get:function(){return this._name||(this._name="Rectangle ".concat(++n.autoNameCount)),this._name},set:function(e){this._name=e}}]),n}(P);L.autoNameCount=0;var Y=function(){function e(){Object(u.a)(this,e),this.gRender=void 0,this.selectedElement=void 0,Object(s.m)(this,{selectedElement:s.n})}return Object(d.a)(e,[{key:"initRender",value:function(e){var t=this;this.gRender=O.init(e),this.gRender.setBackgroundColor("rgb(228,228,228)"),function(e){var t,n,r,i,o=new L(0,0,89,80);o.name="Rectangle 2",o.transform.tx=60,o.transform.ty=106;var a=new R;a.setColor("rgb(131, 23, 239)"),a.type="solid";var s=new z;s.type="solid",s.setColor("rgb(112,112,112)"),o.style.stroke=s,o.style.fill=a,null===(t=e.gRender)||void 0===t||t.add(o);var c=new L(0,0,105,80);c.name="Rectangle 4";var l=new R;l.type="gradient";var u=new A(1,.39614754915237427,0,.5);u.addColorStop(0,"rgb(23,181,239)"),u.addColorStop(1,"rgb(120,12,19)"),l.gradient=u;var d=new z;d.type="solid",d.setColor("rgb(112,112,112)"),c.style.stroke=d,c.style.fill=l,null===(n=e.gRender)||void 0===n||n.add(c);var h=new L(0,0,89,80);h.name="Rectangle 3",h.rotation=x(-31),h.transform.tx=45.75453186035156,h.transform.ty=257.63250732421875,h.transform.a=.8571673035621643,h.transform.b=-.5150380730628967,h.transform.c=.5150380730628967,h.transform.d=.8571673035621643;var f=new R;f.setColor("rgb(131, 23, 239)"),f.type="solid";var v=new z;v.type="solid",v.setColor("rgb(112,112,112)"),h.style.stroke=v,h.style.fill=f,null===(r=e.gRender)||void 0===r||r.add(h);var m=new L(0,0,105,80);m.name="Rectangle 5",m.rotation=x(-62),m.transform.tx=180.5348358154297,m.transform.ty=113.57588958740234,m.transform.a=.4694715738296509,m.transform.b=-.882947564125061,m.transform.c=.882947564125061,m.transform.d=.4694715738296509;var g=new R;g.type="gradient";var p=new A(1,.39614754915237427,0,.5);p.addColorStop(0,"rgb(23,181,239)"),p.addColorStop(1,"rgb(120,12,19)"),g.gradient=p;var b=new z;b.type="solid",b.setColor("rgb(112,112,112)"),m.style.stroke=b,m.style.fill=g,null===(i=e.gRender)||void 0===i||i.add(m)}(this),this.gRender.on("mousedown",(function(e){e.browserMouseEvent.button===o.Main&&Object(s.p)((function(){t.selectedElement=e.target}))})),this.gRender.on("resize",(function(e){t.render()})),this.render()}},{key:"render",value:function(){var e;this.gRender&&(null===(e=this.gRender)||void 0===e||e.render())}}]),e}(),F=function(){function e(){Object(u.a)(this,e),this.containerDomElement=void 0,this.mouseButton=void 0,this.isMouseDown=!1,this.isMouseMoving=!1,this.mouseDownX=void 0,this.mouseDownY=void 0,this.currentMouseX=0,this.currentMouseY=0,this.mouseUpX=void 0,this.mouseUpY=void 0,Object(s.l)(this)}return Object(d.a)(e,[{key:"isMainButtonDown",get:function(){return this.mouseButton===o.Main&&this.isMouseDown}},{key:"isSecondaryButtonDown",get:function(){return this.mouseButton===o.Secondary&&this.isMouseDown}},{key:"isAuxiliaryButtonDown",get:function(){return this.mouseButton===o.Auxiliary&&this.isMouseDown}}]),Object(d.a)(e,[{key:"update",value:function(e){Object.assign(this,e)}}]),e}(),N=n(32),_=n.n(N),I=n(48),W=n(81);function U(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(I.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="__file_utils__open_file",e.abrupt("return",new Promise((function(e){var r=document.querySelector("input#".concat(n));r&&(console.log(r),r.remove()),(r=document.createElement("input")).setAttribute("id",n),r.setAttribute("type","file"),r.setAttribute("hidden",""),t&&r.setAttribute("accept",t),document.body.appendChild(r),r.click(),r.addEventListener("change",(function(){var t,n;e(null===(t=r)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0])}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=new(n.n(W).a),G=/^artwork\/artboard-([\w | -]+)\/(.+)(graphicContent\.agc)/,J=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"loadXDFile",value:function(){var e=Object(I.a)(_.a.mark((function e(){var t,n,r,i,o,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(".xd");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Z.loadAsync(t);case 7:for(n=e.sent,console.log(n),r=0,i=Object.entries(n.file);r<i.length;r++)o=Object(j.a)(i[r],2),a=o[0],o[1],G.test(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),q={uiStore:new function e(){Object(u.a)(this,e),this.showMenuDrawer=!1,this.showRenameModal=!1,this.selectedDesignTool=r.Select,this.selectedOtherTool=void 0,Object(s.l)(this)},projectStore:new J,canvasStore:new Y,canvasMouseStore:new F},H=l.a.createContext(q);window.__MOBX_STORE__=q;var $=q.uiStore,K=q.canvasStore,V=q.canvasMouseStore,ee=null;Object(s.o)((function(){return Object(a.a)({selectedDesignTool:$.selectedDesignTool},V)}),(function(e){if(e.selectedDesignTool===r.Rectangle&&e.isMouseDown){var t,n=e.mouseDownX,i=e.mouseDownY,o=e.currentMouseX,a=e.currentMouseY,s=Math.min(n,o),c=Math.min(i,a),l=Math.abs(n-o),u=Math.abs(i-a);if(ee)ee.updateTransform({tx:s,ty:c}),ee.width=l,ee.height=u;else(ee=new L(0,0,l,u)).style.fill.type="solid",ee.style.fill.setColor("#fff"),ee.style.stroke.setColor("#707070"),ee.style.stroke.type="solid",ee.transform.tx=s,ee.transform.ty=c,null===(t=K.gRender)||void 0===t||t.add(ee),K.selectedElement=ee;K.render()}else ee&&(ee=null)}));var te=q.uiStore,ne=q.canvasStore,re=q.canvasMouseStore,ie=null;Object(s.o)((function(){return{selectedDesignTool:te.selectedDesignTool,selectedElement:ne.selectedElement,mouseButton:re.mouseButton,mouseDownX:re.mouseDownX,mouseDownY:re.mouseDownY,currentMouseX:re.currentMouseX,currentMouseY:re.currentMouseY,isMouseDown:re.isMouseDown}}),(function(e){if(e.selectedDesignTool===r.Select&&e.isMouseDown&&e.selectedElement&&e.mouseButton===o.Main){var t=e.mouseDownX,n=e.mouseDownY,i=e.currentMouseX,a=e.currentMouseY,s=e.selectedElement;if(ie||(ie=s.getBoundingBox()),Math.abs(i-t)>Number.EPSILON||Math.abs(a-n)>Number.EPSILON){var c=i-(t-ie.transform.tx),l=a-(n-ie.transform.ty);s.updateTransform({tx:c,ty:l}),ne.render()}}else ie=null}));var oe=n(39),ae=n.n(oe),se=n(8),ce=n(25),le=n(169),ue=n(172),de=n(82),he=n(41),fe=n(13),ve=function(){return l.a.useContext(H)},me=n(101).a,ge=n(19);function pe(){var e=Object(se.a)(["\n  pointer-events: none;\n  display: inline-block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  background: #fff;\n  border: 1px solid #000;\n"]);return pe=function(){return e},e}var be=me.div(pe()),ye=Object(ge.a)((function(){var e=ve().canvasMouseStore;return l.a.createElement(be,null,"x: ",e.currentMouseX,l.a.createElement("br",null),"y: ",e.currentMouseY)}));function we(){var e=Object(se.a)(["\n  position: absolute;\n  pointer-events: none;\n  width: 8px;\n  height: 8px;\n  ","\n  border: 1px solid ",";\n  border-radius: 50%;\n  background-color: #fff;\n\n  &:hover {\n    background-color: ",';\n  }\n\n  /* &::after {\n    position: absolute;\n    content: "";\n    display: block;\n    cursor: s-resize;\n    width: 5px;\n    height: 5px;\n    background: red;\n    right: 2px;\n  } */\n']);return we=function(){return e},e}function xe(){var e=Object(se.a)(["\n  position: absolute;\n  box-sizing: border-box;\n  transform-origin: top left;\n  outline: 1px solid ",";\n"]);return xe=function(){return e},e}var Ee=me.div(xe(),(function(e){return e.theme.palette.primary})),Oe=me.div(we(),(function(e){return function(e){switch(e){case"nw":return"\n        cursor: nwse-resize;\n        top: -5px;\n        left: -5px;\n      ";case"n":return"\n        cursor: n-resize;\n        top: -5px;\n        left: calc(50% - 4px);\n      ";case"ne":return"\n        cursor: nesw-resize;\n        top: -5px;\n        right: -5px;\n      ";case"e":return"\n        cursor: ew-resize;\n        top: calc(50% - 4px);\n        right: -5px;\n      ";case"se":return"\n        cursor: nwse-resize;\n        bottom: -5px;\n        right: -5px;\n      ";case"s":return"\n        cursor: ns-resize;\n        bottom: -5px;\n        left: calc(50% - 4px);\n      ";case"sw":return"\n        cursor: nesw-resize;\n        bottom: -5px;\n        left: -5px;\n      ";case"w":return"\n        cursor: ew-resize;\n        top: calc(50% - 4px);\n        left: -5px;\n      ";default:return""}}(e.resizeEdge)}),(function(e){return e.theme.palette.primary}),(function(e){return e.theme.palette.primary})),je=function(e){var t=e.getBoundingBox(),n=t.getTransformed();return{x:t.transform.tx+t.x,y:t.transform.ty+t.y,width:n.width,height:n.height}},Se=Object(ge.a)((function(){var e,t=ve().canvasStore,n=Object(c.useRef)(null),r=t.selectedElement,i=Object(c.useState)(),o=Object(j.a)(i,2),a=o[0],s=o[1];if(Object(c.useEffect)((function(){var e=function(e){s(je(e.target))};if(r)return s(je(r)),r.on("boundingChange",e),function(){r.off("boundingChange",e)}}),[r]),!r)return null;var u=function(e){},d=function(e){};return l.a.createElement(Ee,{style:{left:0,top:0,width:null===a||void 0===a?void 0:a.width,height:null===a||void 0===a?void 0:a.height,transform:"translate(".concat(null===a||void 0===a?void 0:a.x,"px, ").concat(null===a||void 0===a?void 0:a.y,"px) rotate(").concat(E(null!==(e=r.rotation)&&void 0!==e?e:0),"deg)"),transformOrigin:"top left",willChange:"transform"}},l.a.createElement(Oe,{resizeEdge:"nw",draggable:!0,onDragStart:function(){console.log("dddstart"),n.current="nw"},onDrag:u,onDragEnd:d}),l.a.createElement(Oe,{resizeEdge:"n",draggable:!0,onDragStart:function(e){n.current="n"},onDrag:u,onDragEnd:d}),l.a.createElement(Oe,{resizeEdge:"ne",draggable:!0,onDragStart:function(e){n.current="ne"},onDrag:u,onDragEnd:d}),l.a.createElement(Oe,{resizeEdge:"e",draggable:!0,onDragStart:function(e){n.current="e"},onDrag:u,onDragEnd:d}),l.a.createElement(Oe,{resizeEdge:"se",draggable:!0,onDragStart:function(e){n.current="se"},onDrag:u,onDragEnd:d}),l.a.createElement(Oe,{resizeEdge:"s",draggable:!0,onDragStart:function(e){n.current="w"},onDrag:u,onDragEnd:d}),l.a.createElement(Oe,{resizeEdge:"sw",draggable:!0,onDragStart:function(e){n.current="sw"},onDrag:u,onDragEnd:d}),l.a.createElement(Oe,{resizeEdge:"w",draggable:!0,onDragStart:function(e){n.current="w"},onDrag:u,onDragEnd:d}))}));function ke(){var e=Object(se.a)(['\n  position: absolute;\n  border: 1px solid #fff;\n  overflow: hidden;\n\n  &::after {\n    content: "";\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: ',";\n    opacity: 0.2;\n  }\n"]);return ke=function(){return e},e}var De=me.div(ke(),(function(e){return e.theme.palette.primary})),Me=Object(ge.a)((function(){var e=ve(),t=e.uiStore,n=e.canvasMouseStore,i=e.canvasStore;if(t.selectedDesignTool!==r.Select||!n.isMouseDown||n.mouseButton!==o.Main||n.isMouseDown&&i.selectedElement)return null;var a=n.mouseDownX,s=n.mouseDownY,c=n.currentMouseX,u=n.currentMouseY,d=Math.min(a,c),h=Math.min(s,u),f=Math.abs(a-c),v=Math.abs(s-u);return l.a.createElement(De,{style:{left:d,top:h,width:f,height:v}})}));function Ce(){var e=Object(se.a)(["\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n"]);return Ce=function(){return e},e}function Te(){var e=Object(se.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n"]);return Te=function(){return e},e}var Re=me.div(Te()),ze=me.div(Ce()),Be=function(){var e=ve(),t=e.canvasStore,n=e.canvasMouseStore,r=Object(c.useRef)(null),i=Object(c.useRef)(null);return Object(c.useEffect)((function(){t.initRender(r.current),Object(s.p)((function(){n.containerDomElement=r.current}))}),[n,t]),Object(c.useEffect)((function(){var e,t=function(t){var r=i.current.getBoundingClientRect();n.update({isMouseMoving:!0,currentMouseX:t.clientX-r.x,currentMouseY:t.clientY-r.y}),e&&clearTimeout(e),e=setTimeout((function(){n.update({isMouseMoving:!1})}),500)},r=function(e){var t=i.current.getBoundingClientRect();n.update({isMouseDown:!1,isMouseMoving:!1,mouseButton:e.button,mouseUpX:e.clientX-t.x,mouseUpY:e.clientY-t.y})};return window.addEventListener("mousemove",t),window.addEventListener("mouseup",r),function(){e&&clearTimeout(e),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",r)}}),[n]),l.a.createElement(Re,{onMouseDown:function(e){var t=i.current.getBoundingClientRect();n.update({isMouseDown:!0,isMouseMoving:!1,mouseButton:e.button,mouseDownX:e.clientX-t.x,mouseDownY:e.clientY-t.y})},ref:r},l.a.createElement(ze,{ref:i},l.a.createElement(Me,null),l.a.createElement(Se,null),l.a.createElement(ye,null)))},Ae=n(84),Pe=n.n(Ae),Xe=n(66),Le=n.n(Xe);function Ye(){var e=Object(se.a)(["\n  display: inherit;\n"]);return Ye=function(){return e},e}function Fe(){var e=Object(se.a)(["\n  flex: 1;\n  overflow: auto;\n"]);return Fe=function(){return e},e}function Ne(){var e=Object(se.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 15px;\n  height: 40px;\n  margin-bottom: 10px;\n"]);return Ne=function(){return e},e}function _e(){var e=Object(se.a)(["\n  display: flex;\n  justify-content: space-between;\n  cursor: pointer;\n  align-items: center;\n  height: 40px;\n  padding: 0 15px;\n\n  &:hover {\n    background-color: ",";\n  }\n"]);return _e=function(){return e},e}function Ie(){var e=Object(se.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 285px;\n  height: 100%;\n"]);return Ie=function(){return e},e}function We(){var e=Object(se.a)(["\n  display: flex;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  font-size: 12px;\n  /* color: #000; */\n  background-color: ",";\n"]);return We=function(){return e},e}function Ue(){var e=Object(se.a)(["\n  display: ",";\n  position: fixed;\n  z-index: 9999;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  transform: translateX(-100%);\n  transition: transform 0.2s ease;\n  &.show {\n    transform: translateX(0);\n  }\n"]);return Ue=function(){return e},e}var Qe=me.div(Ue(),(function(e){return e.hidden?"none":"block"})),Ze=me.div(We(),(function(e){return e.theme.palette.background.default})),Ge=me.div(Ie()),Je=me.div(_e(),(function(e){return e.theme.palette.background.hover})),qe=me.div(Ne()),He=me.div(Fe()),$e=me.div(Ye()),Ke=Object(ge.a)((function(){var e=ve(),t=e.uiStore,n=e.projectStore;return l.a.createElement(l.a.Fragment,null,l.a.createElement($e,{onClick:function(){t.showMenuDrawer=!t.showMenuDrawer}},l.a.createElement(Le.a,{size:"S"})),l.a.createElement(Qe,{className:t.showMenuDrawer?"show":"",onClick:function(){t.showMenuDrawer=!1}},l.a.createElement(Ze,{onClick:function(e){return e.stopPropagation()}},l.a.createElement(Ge,null,l.a.createElement(qe,null,l.a.createElement($e,{onClick:function(){return t.showMenuDrawer=!t.showMenuDrawer}},l.a.createElement(Le.a,{size:"S"}))),l.a.createElement(He,null,l.a.createElement(Je,{onClick:function(){return window.open(window.location.origin)}},l.a.createElement("div",null,"New"),l.a.createElement("div",null,"Ctrl + N")),l.a.createElement(Je,{onClick:function(){n.loadXDFile()}},l.a.createElement("div",null,"Open"),l.a.createElement("div",null,"Ctrl + O")),l.a.createElement(Je,null,l.a.createElement("div",null,"Rename your document")))),l.a.createElement(ue.a,{orientation:"vertical",size:"M"}))))}));function Ve(){var e=Object(se.a)(["\n  color: ",";\n  position: relative;\n  height: 100%;\n  box-sizing: border-box;\n  text-decoration: none;\n  line-height: 40px;\n\n  &.active {\n    color: ",';\n  }\n  &.active::before {\n    content: " ";\n    display: block;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    height: 2px;\n    width: 100%;\n    background: ',";\n  }\n"]);return Ve=function(){return e},e}function et(){var e=Object(se.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  grid-column: 3 / 4;\n  grid-row: 1;\n"]);return et=function(){return e},e}function tt(){var e=Object(se.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  grid-column: 2 / 3;\n  grid-row: 1;\n"]);return tt=function(){return e},e}function nt(){var e=Object(se.a)(["\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  margin: 0 16px;\n"]);return nt=function(){return e},e}function rt(){var e=Object(se.a)(["\n  grid-column: 1 / 2;\n  grid-row: 1;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  height: 100%;\n"]);return rt=function(){return e},e}function it(){var e=Object(se.a)(["\n  cursor: pointer;\n  width: 100%;\n  height: 40px;\n  font-size: 13px;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: auto;\n"]);return it=function(){return e},e}var ot=me.div(it()),at=me.div(rt()),st=me.div(nt()),ct=me.div(tt()),lt=me.div(et()),ut=me(he.c)(Ve(),(function(e){return e.theme.palette.text.label}),(function(e){return e.theme.palette.text.primary}),(function(e){return e.theme.palette.text.primary})),dt=function(){return l.a.createElement(ot,null,l.a.createElement(at,null,l.a.createElement(st,null,l.a.createElement(Ke,null)),l.a.createElement(st,{onClick:function(){return window.open(window.location.origin)}},l.a.createElement(Pe.a,{size:"S"})),l.a.createElement(st,null,l.a.createElement(ut,{to:"/design",activeClassName:"active"},"Design")),l.a.createElement(st,null,l.a.createElement(ut,{to:"/prototype",activeClassName:"active"},"Prototype")),l.a.createElement(st,null,l.a.createElement(ut,{to:"/share",activeClassName:"active"},"Share"))),l.a.createElement(ct,null,"XD Tutorial"),l.a.createElement(lt,null,"6.3%"))},ht=n(15),ft=n(86),vt=n(171),mt=function(e){var t=e.autoSelect,n=e.addonAfter,r=e.value,i=e.onChange,o=e.onFocus,a=e.onBlur,s=Object(ft.a)(e,["autoSelect","addonAfter","value","onChange","onFocus","onBlur"]),u=Object(c.useState)(""),d=Object(j.a)(u,2),h=d[0],f=d[1],v=Object(c.useState)(!1),m=Object(j.a)(v,2),g=m[0],p=m[1];Object(c.useEffect)((function(){g?f(r):f(n?r+n:r)}),[r,n,g]);return l.a.createElement(vt.a,Object.assign({},s,{onFocus:function(e){var r=n?null===h||void 0===h?void 0:h.slice(0,-n.length):h;if(f(r),t){var i=e.target;setTimeout((function(){var e;null===(e=i.select)||void 0===e||e.call(i)}),0)}null===o||void 0===o||o(e)},onBlur:function(e){p(!1),f(n?h+n:h),null===a||void 0===a||a(e)},onChange:function(e){p(!0),f(e),null===i||void 0===i||i(e)},value:h}))};function gt(){var e=Object(se.a)([""]);return gt=function(){return e},e}var pt=me.div(gt()),bt=Object(ge.a)((function(){var e,t=ve().canvasStore,n=t.selectedElement,r=Object(ht.d)((function(){return{x:"0",y:"0",width:"0",height:"0",rotate:"0",update:function(e,t){M.a.set(this,e,t)}}}));return Object(c.useEffect)((function(){var e=function(e){var t=e.target.getBoundingBox().getTransformed();Object(s.p)((function(){r.x=t.x.toString(),r.y=t.y.toString(),r.width=t.width.toString(),r.height=t.height.toString()}))};if(n){var t=n.getBoundingBox().getTransformed();return Object(s.p)((function(){r.x=t.x.toString(),r.y=t.y.toString(),r.width=t.width.toString(),r.height=t.height.toString()})),n.on("boundingChange",e),function(){null===n||void 0===n||n.off("boundingChange",e)}}}),[r,n]),l.a.createElement(pt,null,l.a.createElement(mt,{label:"W",isQuiet:!0,autoSelect:!0,value:r.width.toString(),onChange:function(e){return r.update("w",e)}}),l.a.createElement(mt,{label:"H",isQuiet:!0,autoSelect:!0,value:r.height.toString(),onChange:function(e){return r.update("h",e)}}),l.a.createElement(mt,{label:"X",isQuiet:!0,autoSelect:!0,value:r.x.toString(),onChange:function(e){return r.update("x",e)}}),l.a.createElement(mt,{label:"Y",isQuiet:!0,autoSelect:!0,value:r.y.toString(),onChange:function(e){return r.update("y",e)}}),l.a.createElement(mt,{label:"R",isQuiet:!0,autoSelect:!0,value:E(null!==(e=null===n||void 0===n?void 0:n.rotation)&&void 0!==e?e:0).toString(),onChange:function(e){r.update("rotate",e)},onBlur:function(e){var i=Number(r.rotate),o=x(i);null===n||void 0===n||n.setRotate(o),t.render()},addonAfter:"\xb0"}))}));function yt(){var e=Object(se.a)(["\n  flex: 1;\n  overflow: auto;\n"]);return yt=function(){return e},e}var wt=me.div(yt()),xt=Object(ge.a)((function(){var e=ve().canvasStore;return l.a.createElement(wt,null,l.a.createElement(bt,null),l.a.createElement("pre",null,JSON.stringify(e.selectedElement,null,2)))})),Et=n(90),Ot=n.n(Et),jt=n(91),St=n.n(jt),kt=n(92),Dt=n.n(kt),Mt=n(93),Ct=n.n(Mt),Tt=n(94),Rt=n.n(Tt),zt=n(95),Bt=n.n(zt),At=n(96),Pt=n.n(At),Xt=n(97),Lt=n.n(Xt),Yt=n(98),Ft=n.n(Yt),Nt=n(99),_t=n.n(Nt),It=n(100),Wt=n.n(It);function Ut(){var e=Object(se.a)(["\n  width: 48px;\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n"]);return Ut=function(){return e},e}function Qt(){var e=Object(se.a)(["\n  cursor: pointer;\n  width: 48px;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n"]);return Qt=function(){return e},e}var Zt=me.div(Qt()),Gt=me.div(Ut(),(function(e){var t=e.theme;return e.active&&t.palette.icon.informative})),Jt=[{name:"Select",value:r.Select,icon:l.a.createElement(Ft.a,{size:"S"})},{name:"Rectangle",value:r.Rectangle,icon:l.a.createElement(Pt.a,{size:"S"})},{name:"Ellipse",value:r.Ellipse,icon:l.a.createElement(St.a,{size:"S"})},{name:"Polygon",value:r.Polygon,icon:l.a.createElement(Bt.a,{size:"S"})},{name:"Line",value:r.Line,icon:l.a.createElement(Ct.a,{size:"S"})},{name:"Pen",value:r.Pen,icon:l.a.createElement(Wt.a,{size:"S"})},{name:"Text",value:r.Text,icon:l.a.createElement(_t.a,{size:"S"})},{name:"Artboard",value:r.Artboard,icon:l.a.createElement(Ot.a,{size:"S"})},{name:"Zoom",value:r.Zoom,icon:l.a.createElement(Lt.a,{size:"S"})}],qt=[{name:"Assets",value:i.Assets,icon:l.a.createElement(Rt.a,{size:"S"})},{name:"Layers",value:i.Layers,icon:l.a.createElement(Dt.a,{size:"S"})}],Ht=Object(ge.a)((function(){var e=ve().uiStore;return l.a.createElement(Zt,null,l.a.createElement("div",null,Jt.map((function(t){return l.a.createElement(Gt,{onClick:function(){Object(s.p)((function(){e.selectedDesignTool=t.value}))},active:t.value===e.selectedDesignTool,key:t.name},t.icon)}))),l.a.createElement("div",null,qt.map((function(t){return l.a.createElement(Gt,{onClick:function(){Object(s.p)((function(){t.value===e.selectedOtherTool?e.selectedOtherTool=void 0:e.selectedOtherTool=t.value}))},active:t.value===e.selectedOtherTool,key:t.name},t.icon)}))))})),$t=function(){return l.a.createElement("div",null,l.a.createElement(he.b,{to:"/design"},"design"))},Kt={palette:{primary:"var(--spectrum-global-color-blue-500)",secondary:"var(--spectrum-global-color-red-600)",background:{default:"var(--spectrum-alias-background-color-default)",hover:"var(--spectrum-alias-highlight-hover)"},text:{primary:"var(--spectrum-alias-text-color)",hover:"var(--spectrum-alias-text-color-hover)",label:"var(--spectrum-alias-label-text-color)",disabled:"var(--spectrum-alias-text-color-disabled)",invalid:"var(--spectrum-alias-text-color-invalid)",selected:"var(--spectrum-alias-text-color-selected)"},icon:{informative:"var(--spectrum-semantic-informative-color-icon)",negative:"var(--spectrum-semantic-negative-color-icon)",notice:"var(--spectrum-semantic-notice-color-icon)",positive:"var(--spectrum-semantic-positive-color-icon)"}}};function Vt(){var e=Object(se.a)(["\n  display: flex;\n  grid-column: 3 / 4;\n  grid-row: 2 / 3;\n  overflow: hidden;\n"]);return Vt=function(){return e},e}function en(){var e=Object(se.a)(["\n  display: flex;\n  grid-column: 2 / 3;\n  grid-row: 2 / 3;\n  overflow: hidden;\n"]);return en=function(){return e},e}function tn(){var e=Object(se.a)(["\n  display: flex;\n  grid-column: 1 / 2;\n  grid-row: 2 / 3;\n  overflow: hidden;\n"]);return tn=function(){return e},e}function nn(){var e=Object(se.a)(["\n  grid-column: 1 / 4;\n  grid-row: 1;\n"]);return nn=function(){return e},e}function rn(){var e=Object(se.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: 50px auto 292px;\n  grid-template-rows: 42px auto;\n  /**\n  * prevent-content-from-expanding-grid-items\n  * @see https://stackoverflow.com/a/43312314/9642423\n  **/\n  min-height: 0;\n  min-width: 0;\n"]);return rn=function(){return e},e}var on=me.div(rn()),an=me.div(nn()),sn=me.div(tn()),cn=me.div(en()),ln=me.div(Vt());var un=function(){return l.a.createElement(de.a,{theme:Kt},l.a.createElement(ce.a,{theme:le.a,width:"100%",height:"100%",locale:"en-US",colorScheme:"light"},l.a.createElement(he.a,null,l.a.createElement(fe.c,null,l.a.createElement(fe.a,{exact:!0,path:"/"},l.a.createElement($t,null)),l.a.createElement(fe.a,null,l.a.createElement(on,null,l.a.createElement(an,null,l.a.createElement(dt,null),l.a.createElement(ue.a,{size:"M"})),l.a.createElement(sn,null,l.a.createElement(Ht,null),l.a.createElement(ue.a,{orientation:"vertical",size:"M"})),l.a.createElement(cn,null,l.a.createElement(Be,null)),l.a.createElement(ln,null,l.a.createElement(ue.a,{orientation:"vertical",size:"M"}),l.a.createElement(xt,null))))))))},dn=n(18),hn=n.n(dn);var fn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,173)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))},vn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function mn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}ae.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(un,null)),document.getElementById("root")),hn.a.bind("v",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Select}))})),hn.a.bind("r",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Rectangle}))})),hn.a.bind("e",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Ellipse}))})),hn.a.bind("y",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Polygon}))})),hn.a.bind("l",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Line}))})),hn.a.bind("p",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Pen}))})),hn.a.bind("t",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Text}))})),hn.a.bind("a",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Artboard}))})),hn.a.bind("z",(function(){Object(s.p)((function(){q.uiStore.selectedDesignTool=r.Zoom}))})),hn.a.bind("ctrl + shift + y",(function(e){null===e||void 0===e||e.preventDefault(),Object(s.p)((function(){q.uiStore.selectedOtherTool=q.uiStore.selectedOtherTool===i.Assets?void 0:i.Assets}))})),hn.a.bind("ctrl + y",(function(e){null===e||void 0===e||e.preventDefault(),Object(s.p)((function(){q.uiStore.selectedOtherTool=q.uiStore.selectedOtherTool===i.Layers?void 0:i.Layers}))})),hn.a.bind("ctrl + n",(function(e){null===e||void 0===e||e.preventDefault(),window.open(window.location.origin)})),hn.a.bind("ctrl + o",(function(e){null===e||void 0===e||e.preventDefault(),Object(s.p)((function(){q.projectStore.loadXDFile()}))})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");vn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):mn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):mn(t,e)}))}}(),fn()}},[[167,1,2]]]);
//# sourceMappingURL=main.24d5bc5c.chunk.js.map