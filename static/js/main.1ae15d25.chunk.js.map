{"version":3,"sources":["constants.ts","draw/utils.ts","draw/gRender.ts","draw/transform.ts","draw/style.ts","draw/element.ts","draw/shape.ts","initialState.tsx","stores/canvas.ts","stores/canvasMouse.ts","utils/fileUtils.ts","stores/project.ts","contexts.ts","stores/userInterface.ts","reactions/drawRectangle.ts","reactions/moveElement.ts","hooks/useStores.ts","styles/styled.tsx","components/canvas-controls/PositionTip.tsx","components/canvas-controls/ResizeAndRotate.tsx","components/canvas-controls/Selection.tsx","components/Canvas.tsx","components/Menu.tsx","components/Header.tsx","components/common/Input.tsx","utils/number.ts","components/property-edit/SizeAndPosition.tsx","components/PropertyEditor.tsx","components/ToolBox.tsx","pages/Home.tsx","styles/theme.ts","App.tsx","reportWebVitals.ts","serviceWorkerRegistration.ts","index.tsx","keyboard.ts"],"names":["DesignTool","OtherTool","MouseEventButton","setupCanvas","canvas","dpr","window","devicePixelRatio","rect","getBoundingClientRect","width","height","ctx","getContext","scale","createTranslateMatrix","x","y","math","degree2Radian","degree","Math","PI","radian2Degree","radian","GRender","container","containerElement","canvasElement","canvasCtx2D","elements","eventEmitter","EventEmitter","backgroundColor","Color","canvasResizeObserver","ResizeObserver","entries","target","resizeCanvas","emit","type","this","document","createElement","setAttribute","appendChild","listenCanvasDomEvents","observe","color","save","fillStyle","string","fillRect","restore","i","length","render","element","gRender","unshift","index","indexOf","splice","listener","on","off","point","currentElement","isInnerPoint","forEach","eventType","addEventListener","e","s","clientX","clientY","targetElement","getElementFromPoint","browserMouseEvent","Transform","a","b","c","d","tx","ty","matrix","t","direction","res","multiply","toMatrix","get","Style","fill","stroke","FillStyle","StrokeStyle","gradient","getBoundingBox","getTransformed","transform","toCanvasGradient","Gradient","stops","offset","push","LinearGradient","x1","y1","x2","y2","toArray","lg","createLinearGradient","addColorStop","Element","visible","style","rotation","name","data","removeAllListeners","remove","property","Object","assign","BoundingBox","transformMatrix","ta","tb","tc","td","min","Rectangle","_name","strokeStyle","toCanvasStrokeStyle","lineWidth","strokeRect","toCanvasFillStyle","emitBoundingChangeEvent","v","invTransform","inv","region","wn","reduce","p1","p2","max","isUpwardEdge","pointInRegionWN","_","clone","key","value","currentX","m","currentY","angle","shouldRotateAngle","abs","Number","EPSILON","rotate","center","centerPointVec","values","multiMatrixMultiply","createRotateMatrix","autoNameCount","CanvasStore","selectedElement","makeObservable","observable","init","setBackgroundColor","canvasStore","rect2","fillStyle2","setColor","strokeStyle2","add","rect4","fillStyle4","lg4","strokeStyle4","rect3","fillStyle3","strokeStyle3","rect5","fillStyle5","lg5","strokeStyle5","setUpDevelopmentInitialCanvasStore","button","Main","runInAction","CanvasMouseStore","containerDomElement","mouseButton","isMouseDown","isMouseMoving","mouseDownX","mouseDownY","currentMouseX","currentMouseY","mouseUpX","mouseUpY","makeAutoObservable","Secondary","Auxiliary","params","openFile","accept","elementId","Promise","resolve","fileInput","querySelector","console","log","body","click","files","zip","JSZip","artboardFileNameRegexp","ProjectStore","xdProjectFile","loadAsync","xdProjectData","file","xdProjectFilePath","test","globalStores","uiStore","showMenuDrawer","showRenameModal","selectedDesignTool","Select","selectedOtherTool","projectStore","canvasMouseStore","storesContext","React","createContext","__MOBX_STORE__","creatingRect","reaction","updateTransform","elementBoundingBox","targetX","targetY","useStores","useContext","styled","Root","div","observer","theme","palette","primary","ControlPoint","edge","getControlPointPositionStyle","resizeEdge","calculateBoundingRect","currentBoundingBox","selectedEdgeRef","useRef","useState","boundingRect","setBoundingRect","useEffect","handleBoundingChange","handleOnDrag","handleDragEnd","left","top","transformOrigin","willChange","draggable","onDragStart","current","onDrag","onDragEnd","OperationLayer","Canvas","canvasContainerRef","operationLayerRef","initRender","mouseMoveDetectTimer","handleMouseMove","update","clearTimeout","setTimeout","handleMouseUp","removeEventListener","onMouseDown","ref","MenuDrawerRoot","props","hidden","MenuDrawer","background","default","ListRoot","ListItem","hover","ListHeader","ListContent","MenuButtonWrapper","onClick","size","className","stopPropagation","open","location","origin","loadXDFile","orientation","LeftActions","LeftActionItem","CenterActions","RightActions","NavItem","NavLink","text","label","Header","to","activeClassName","Input","autoSelect","addonAfter","onChange","onFocus","onBlur","restProps","displayValue","setDisplayValue","isFocus","setIsFocus","slice","select","fRound","n","precision","round","boundingRectInput","useLocalObservable","k","set","boundingBox","toString","isQuiet","setBounding","r","setRotate","JSON","stringify","ToolItem","active","icon","informative","designToolsData","Ellipse","Polygon","Line","Pen","Text","Artboard","Zoom","otherToolsData","Assets","Layers","map","undefined","Home","defaultTheme","secondary","disabled","invalid","selected","negative","notice","positive","GridRoot","HeaderGridItem","ToolBoxGridItem","CanvasGridItem","PropertyEditorGridItem","App","spectrumDefaultTheme","locale","colorScheme","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","ReactDOM","StrictMode","getElementById","keyboardJS","bind","preventDefault","URL","process","href","fetch","headers","response","contentType","status","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.1ae15d25.chunk.js","sourcesContent":["export enum DesignTool {\n  Select,\n  Rectangle,\n  Ellipse,\n  Polygon,\n  Line,\n  Pen,\n  Text,\n  Artboard,\n  Zoom,\n}\n\nexport enum OtherTool {\n  Assets,\n  Layers,\n}\n\nexport enum MouseEventButton {\n  Main,\n  Auxiliary,\n  Secondary,\n  Fourth,\n  Fifth,\n}\n","import * as math from \"mathjs\";\n\nexport interface IPoint {\n  x: number;\n  y: number;\n}\n\nexport type Vec2 = [number, number];\nexport type Vec3 = [number, number, number];\n\nexport function setupCanvas(canvas: HTMLCanvasElement) {\n  const dpr = window.devicePixelRatio || 1;\n  const rect = canvas.getBoundingClientRect();\n  canvas.width = rect.width * dpr;\n  canvas.height = rect.height * dpr;\n  const ctx = canvas.getContext(\"2d\");\n  ctx?.scale(dpr, dpr);\n  return ctx;\n}\n\n/**\n * The Crossing Number (cn) method\n * @see http://geomalgorithms.com/a03-_inclusion.html\n *\n *  a point on a left or bottom edge is inside, and a point on a right or top edge is outside\n * @param point\n * @param region\n */\nexport function pointInRegionCN(point: IPoint, region: IPoint[]): boolean {\n  let cn = 0;\n  region.reduce((p1, p2) => {\n    if (p1.y === p2.y) return p2;\n    if (point.y <= Math.min(p1.y, p2.y)) return p2;\n    if (point.y > Math.max(p1.y, p2.y)) return p2;\n\n    let x = ((point.y - p1.y) * (p1.x - p2.x)) / (p1.y - p2.y) + p1.x;\n    if (x > point.x) cn++;\n    return p2;\n  }, region[region.length - 1]);\n  return cn % 2 === 1;\n}\n\n/**\n * The Winding Number (wn) method\n * @see http://geomalgorithms.com/a03-_inclusion.html\n *\n * a point on a left or bottom edge is inside, and a point on a right or top edge is outside\n * @param point\n * @param region\n */\nexport function pointInRegionWN(point: IPoint, region: IPoint[]): boolean {\n  let wn = 0;\n  region.reduce((p1, p2) => {\n    if (p1.y === p2.y) return p2;\n    if (point.y <= Math.min(p1.y, p2.y)) return p2;\n    if (point.y > Math.max(p1.y, p2.y)) return p2;\n\n    let x = ((point.y - p1.y) * (p1.x - p2.x)) / (p1.y - p2.y) + p1.x;\n    const isUpwardEdge = p2.y < p1.y;\n    if (x > point.x) {\n      isUpwardEdge ? wn++ : wn--;\n    }\n    return p2;\n  }, region[region.length - 1]);\n\n  return wn !== 0;\n}\n\nexport const createRotateMatrix = (angle: number) => {\n  return math.matrix([\n    [math.cos(angle), -math.sin(angle), 0],\n    [math.sin(angle), math.cos(angle), 0],\n    [0, 0, 1],\n  ]);\n};\n\nexport const createTranslateMatrix = (x: number, y: number) => {\n  return math.matrix([\n    [1, 0, x],\n    [0, 1, y],\n    [0, 0, 1],\n  ]);\n};\n\n/**\n * multi Matrix product\n * @param values Matrix\n */\nexport const multiMatrixMultiply = (...values: math.Matrix[]): math.Matrix => {\n  return values.reduce((a, b) => math.multiply(a, b));\n};\n\nexport const degree2Radian = (degree: number): number => {\n  return (degree / 180) * Math.PI;\n};\n\nexport const radian2Degree = (radian: number): number => {\n  return (radian / Math.PI) * 180;\n};\n","import Color from \"color\";\nimport EventEmitter from \"eventemitter3\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\nimport { Element } from \"./element\";\nimport { IGRenderEventMap } from \"./events\";\nimport { ColorParam } from \"./style\";\nimport { IPoint, setupCanvas } from \"./utils\";\n\nexport class GRender {\n  static init(container: HTMLElement) {\n    return new GRender(container);\n  }\n\n  containerElement: HTMLElement;\n  canvasElement: HTMLCanvasElement;\n  canvasCtx2D: CanvasRenderingContext2D;\n  elements: Element[] = [];\n  eventEmitter = new EventEmitter();\n  backgroundColor: Color = new Color(\"#fff\");\n\n  private canvasResizeObserver = new ResizeObserver((entries) => {\n    for (const entry of entries) {\n      if (entry.target === this.canvasElement) {\n        this.resizeCanvas();\n        this.eventEmitter.emit(\"resize\", {\n          type: \"resize\",\n          target: this.canvasElement,\n        });\n      }\n    }\n  });\n\n  constructor(container: HTMLElement) {\n    this.containerElement = container;\n\n    this.canvasElement = document.createElement(\"canvas\");\n    this.canvasElement.setAttribute(\n      \"style\",\n      `display: block; width: 100%; height: 100%`\n    );\n    this.containerElement.appendChild(this.canvasElement);\n\n    this.canvasCtx2D = setupCanvas(this.canvasElement)!;\n\n    this.resizeCanvas();\n\n    // canvas DOM 事件监听\n    this.listenCanvasDomEvents();\n\n    // resize 事件监听\n    this.canvasResizeObserver.observe(this.canvasElement);\n  }\n\n  setBackgroundColor(color: ColorParam) {\n    this.backgroundColor = new Color(color);\n  }\n\n  resizeCanvas() {\n    this.canvasCtx2D = setupCanvas(this.canvasElement)!;\n  }\n\n  render() {\n    const rect = this.canvasElement.getBoundingClientRect();\n    this.canvasCtx2D.save();\n    this.canvasCtx2D.fillStyle = this.backgroundColor.string();\n    this.canvasCtx2D.fillRect(0, 0, rect.width, rect.height);\n    this.canvasCtx2D.restore();\n    for (let i = this.elements.length - 1; i >= 0; i--) {\n      const currentElement = this.elements[i];\n      currentElement.render();\n    }\n  }\n\n  add(element: Element) {\n    element.gRender = this;\n    this.elements.unshift(element);\n  }\n\n  remove(element: Element) {\n    const index = this.elements.indexOf(element);\n    if (index !== -1) {\n      this.elements.splice(index, 1);\n    }\n  }\n\n  on<K extends keyof IGRenderEventMap>(\n    type: K,\n    listener: (ev: IGRenderEventMap[K]) => void\n  ): void {\n    this.eventEmitter.on(type, listener);\n  }\n\n  off<K extends keyof IGRenderEventMap>(\n    type: K,\n    listener: (ev: IGRenderEventMap[K]) => void\n  ): void {\n    this.eventEmitter.off(type, listener);\n  }\n\n  getElementFromPoint(point: IPoint): Element | undefined {\n    for (const currentElement of this.elements) {\n      if (currentElement.isInnerPoint(point)) {\n        return currentElement;\n      }\n    }\n  }\n\n  listenCanvasDomEvents() {\n    const mouseEventList: Array<\n      keyof Pick<\n        HTMLElementEventMap,\n        \"click\" | \"mousedown\" | \"mouseup\" | \"mousemove\"\n      >\n    > = [\"click\", \"mousedown\", \"mouseup\", \"mousemove\"];\n    mouseEventList.forEach((eventType) => {\n      this.canvasElement.addEventListener(eventType, (e) => {\n        const s = this.canvasElement.getBoundingClientRect();\n        let point: IPoint = {\n          x: e.clientX - s.x,\n          y: e.clientY - s.y,\n        };\n\n        let targetElement = this.getElementFromPoint(point);\n        targetElement?.emit(eventType, {\n          type: eventType,\n          target: targetElement,\n          browserMouseEvent: e,\n        });\n        this.eventEmitter.emit(eventType, {\n          type: eventType,\n          target: targetElement,\n          browserMouseEvent: e,\n        });\n      });\n    });\n  }\n}\n","import { Matrix, matrix, multiply } from \"mathjs\";\n\nexport class Transform {\n  /**\n   * Horizontal scaling.\n   */\n  a: number = 1;\n  /**\n   * Horizontal skewing.\n   */\n  b: number = 0;\n  /**\n   * Vertical skewing.\n   */\n  c: number = 0;\n  /**\n   * Vertical scaling.\n   */\n  d: number = 1;\n  /**\n   * Horizontal moving.\n   */\n  tx: number = 0;\n  /**\n   * Vertical moving.\n   */\n  ty: number = 0;\n\n  toMatrix() {\n    return matrix([\n      [this.a, this.c, this.tx],\n      [this.b, this.d, this.ty],\n      [0, 0, 1],\n    ]);\n  }\n\n  multiply(t: Matrix, direction: \"left\" | \"right\" = \"right\") {\n    const res =\n      direction === \"left\"\n        ? multiply(t, this.toMatrix())\n        : multiply(this.toMatrix(), t);\n    this.a = res.get([0, 0]);\n    this.b = res.get([1, 0]);\n    this.c = res.get([0, 1]);\n    this.d = res.get([1, 1]);\n    this.tx = res.get([0, 2]);\n    this.ty = res.get([1, 2]);\n  }\n}\n","import Color from \"color\";\nimport { multiply } from \"mathjs\";\n\nimport { Element } from \"./element\";\nimport { Transform } from \"./transform\";\n\nexport type ColorParam =\n  | Color\n  | string\n  | ArrayLike<number>\n  | number\n  | { [key: string]: any };\n\ntype StyleType = \"solid\" | \"gradient\" | \"none\" | undefined;\n\nexport interface IStyle {\n  fill?: FillStyle;\n  stroke?: StrokeStyle;\n}\n\nexport class Style {\n  fill: FillStyle;\n  stroke: StrokeStyle;\n  constructor() {\n    this.fill = new FillStyle();\n    this.stroke = new StrokeStyle();\n  }\n}\n\nexport class FillStyle {\n  type: StyleType;\n  color?: Color;\n  gradient?: Gradient;\n\n  setColor(color: ColorParam) {\n    this.color = new Color(color);\n  }\n\n  toCanvasFillStyle(\n    ctx: CanvasRenderingContext2D,\n    element: Element\n  ): CanvasFillStrokeStyles[\"fillStyle\"] | undefined {\n    switch (this.type) {\n      case \"gradient\":\n        const boundingBox = element.getBoundingBox();\n        const { width, height } = boundingBox.getTransformed();\n        const transform = new Transform();\n        transform.a = width;\n        transform.d = height;\n        return this.gradient?.toCanvasGradient(ctx, transform);\n      case \"solid\":\n        return this.color?.string();\n      case \"none\":\n        return;\n    }\n  }\n}\n\nexport class StrokeStyle {\n  type: StyleType;\n  color?: Color;\n  gradient?: Gradient;\n  width: number = 1;\n\n  setColor(color: ColorParam) {\n    this.color = new Color(color);\n  }\n\n  toCanvasStrokeStyle(\n    ctx: CanvasRenderingContext2D,\n    element: Element\n  ): CanvasFillStrokeStyles[\"strokeStyle\"] | undefined {\n    switch (this.type) {\n      case \"gradient\":\n        const boundingBox = element.getBoundingBox();\n        const { width, height } = boundingBox.getTransformed();\n        const transform = new Transform();\n        transform.a = width;\n        transform.d = height;\n        return this.gradient?.toCanvasGradient(ctx, transform);\n      case \"solid\":\n        return this.color?.string();\n      case \"none\":\n        return;\n    }\n  }\n}\n\nexport abstract class Gradient {\n  stops: Array<{\n    offset: number;\n    color: Color;\n  }> = [];\n\n  addColorStop(offset: number, color: ColorParam) {\n    const c = new Color(color);\n    this.stops.push({\n      offset,\n      color: c,\n    });\n  }\n\n  abstract toCanvasGradient(\n    ctx: CanvasRenderingContext2D,\n    transform?: Transform\n  ): CanvasGradient;\n}\n\nexport class LinearGradient extends Gradient {\n  constructor(\n    public x1: number,\n    public y1: number,\n    public x2: number,\n    public y2: number\n  ) {\n    super();\n  }\n\n  toCanvasGradient(ctx: CanvasRenderingContext2D, transform?: Transform) {\n    let { x1, y1, x2, y2 } = this;\n\n    if (transform) {\n      [x1, y1] = multiply(transform.toMatrix(), [\n        x1,\n        y1,\n        1,\n      ]).toArray() as number[];\n      [x2, y2] = multiply(transform.toMatrix(), [\n        x2,\n        y2,\n        1,\n      ]).toArray() as number[];\n    }\n    const lg = ctx.createLinearGradient(x1, y1, x2, y2);\n    this.stops.forEach((s) => {\n      lg.addColorStop(s.offset, s.color.string());\n    });\n    return lg;\n  }\n}\n\nexport class RadialGradient extends Gradient {\n  constructor(\n    public x1: number,\n    public y1: number,\n    public r1: number,\n    public x2: number,\n    public y2: number,\n    public r2: number\n  ) {\n    super();\n  }\n  toCanvasGradient(ctx: CanvasRenderingContext2D) {\n    const rg = ctx.createRadialGradient(\n      this.x1,\n      this.y1,\n      this.r2,\n      this.x2,\n      this.y2,\n      this.r2\n    );\n    this.stops.forEach((s) => {\n      rg.addColorStop(s.offset, s.color.string());\n    });\n    return rg;\n  }\n}\n","import EventEmitter from \"eventemitter3\";\n\nimport { IElementEventMap } from \"./events\";\nimport { GRender } from \"./gRender\";\nimport { BoundingBox, IBoundingRect } from \"./shape\";\nimport { Style } from \"./style\";\nimport { Transform } from \"./transform\";\nimport { IPoint } from \"./utils\";\n\nexport abstract class Element {\n  visible: boolean = true;\n  style: Style = new Style();\n  transform: Transform = new Transform();\n  rotation: number = 0;\n  gRender?: GRender;\n  eventEmitter = new EventEmitter();\n\n  on<K extends keyof IElementEventMap>(\n    type: K,\n    listener: (ev: IElementEventMap[K]) => void\n  ): void {\n    this.eventEmitter.on(type, listener);\n  }\n\n  off<K extends keyof IElementEventMap>(\n    type: K,\n    listener: (ev: IElementEventMap[K]) => void\n  ): void {\n    this.eventEmitter.off(type, listener);\n  }\n\n  emit<K extends keyof IElementEventMap>(\n    type: K,\n    data: IElementEventMap[K]\n  ): void {\n    this.eventEmitter.emit(type, data);\n  }\n\n  remove() {\n    this.eventEmitter.removeAllListeners();\n    this.gRender?.remove(this);\n  }\n\n  show() {\n    this.visible = true;\n  }\n\n  hide() {\n    this.visible = false;\n  }\n\n  updateTransform(property: Partial<Transform>) {\n    Object.assign(this.transform, property);\n    this.emit(\"boundingChange\", { type: \"boundingChange\", target: this });\n  }\n\n  abstract name: string;\n  abstract type: string;\n\n  abstract render(): void;\n  abstract isInnerPoint(point: IPoint): boolean;\n  abstract toJSON(): any;\n  abstract getBoundingBox(): BoundingBox;\n  abstract setBounding<K extends keyof IBoundingRect>(\n    key: K,\n    value: IBoundingRect[K]\n  ): void;\n  abstract updatePosition(point: IPoint): void;\n\n  /**\n   *  rotate element\n   * @param angle  (measured in radians)\n   * @param center rotate center point; use element Bounding center by default.\n   */\n  abstract rotate(angle: number, center?: IPoint): void;\n\n  /**\n   * set element current rotate\n   * @param angle (measured in radians)\n   */\n  abstract setRotate(angle: number): void;\n}\n","import _ from \"lodash\";\nimport { inv, multiply } from \"mathjs\";\n\nimport { Element } from \"./element\";\nimport { Transform } from \"./transform\";\nimport {\n  createRotateMatrix,\n  createTranslateMatrix,\n  IPoint,\n  multiMatrixMultiply,\n  pointInRegionWN,\n  Vec3,\n} from \"./utils\";\n\nexport interface IBoundingRect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport class BoundingBox {\n  constructor(\n    public x: number,\n    public y: number,\n    public width: number,\n    public height: number,\n    public transform: Transform = new Transform()\n  ) {}\n\n  getTransformed(): IBoundingRect {\n    const a: Vec3 = [this.x, this.y, 1];\n    const b: Vec3 = [this.x + this.width, this.y, 1];\n    const c: Vec3 = [this.x + this.width, this.y + this.height, 1];\n    const d: Vec3 = [this.x, this.y + this.height, 1];\n\n    const transformMatrix = this.transform.toMatrix();\n    const ta = multiply(transformMatrix, a).toArray() as Vec3;\n    const tb = multiply(transformMatrix, b).toArray() as Vec3;\n    const tc = multiply(transformMatrix, c).toArray() as Vec3;\n    const td = multiply(transformMatrix, d).toArray() as Vec3;\n\n    const x = Math.min(ta[0], tb[0], tc[0], td[0]);\n    const y = Math.min(ta[1], tb[1], tc[1], td[1]);\n\n    const width = ((ta[0] - tb[0]) ** 2 + (ta[1] - tb[1]) ** 2) ** 0.5;\n    const height = ((ta[0] - td[0]) ** 2 + (ta[1] - td[1]) ** 2) ** 0.5;\n\n    // const eX = multiply(transformMatrix, [1, 0, 1]);\n    // const eY = multiply(transformMatrix, [0, 1, 1]);\n\n    const newRect = {\n      x,\n      y,\n      width,\n      height,\n    };\n\n    return newRect;\n  }\n}\n\nexport class Rectangle extends Element {\n  static autoNameCount: number = 0;\n\n  type: string;\n  private _name: string = \"\";\n\n  constructor(\n    public x: number,\n    public y: number,\n    public width: number,\n    public height: number\n  ) {\n    super();\n    this.type = \"shape\";\n  }\n\n  get name() {\n    if (!this._name) {\n      this._name = `Rectangle ${++Rectangle.autoNameCount}`;\n    }\n    return this._name;\n  }\n\n  set name(name: string) {\n    this._name = name;\n  }\n\n  render() {\n    if (!this.visible) return;\n    const ctx = this.gRender?.canvasCtx2D;\n    if (!ctx) return;\n    ctx.save();\n    ctx.transform(\n      this.transform.a,\n      this.transform.b,\n      this.transform.c,\n      this.transform.d,\n      this.transform.tx,\n      this.transform.ty\n    );\n    const strokeStyle = this.style?.stroke?.toCanvasStrokeStyle(ctx, this);\n    if (strokeStyle) {\n      ctx.strokeStyle = strokeStyle;\n      ctx.lineWidth = this.style?.stroke?.width || 1;\n      ctx.strokeRect(this.x, this.y, this.width, this.height);\n    }\n    const fillStyle = this.style?.fill?.toCanvasFillStyle(ctx, this);\n    if (fillStyle) {\n      ctx.fillStyle = fillStyle;\n      ctx.fillRect(this.x, this.y, this.width, this.height);\n    }\n\n    ctx.restore();\n  }\n\n  update() {}\n\n  updatePosition(point: IPoint) {\n    if (this.x !== point.x || this.y !== point.y) {\n      this.x = point.x;\n      this.y = point.y;\n      this.emitBoundingChangeEvent();\n    }\n  }\n\n  isInnerPoint(point: IPoint): boolean {\n    const v: Vec3 = [point.x, point.y, 1];\n    const invTransform = inv(this.transform.toMatrix());\n    const res = multiply(invTransform, v);\n    const p: IPoint = {\n      x: res.get([0]),\n      y: res.get([1]),\n    };\n    const pointList: IPoint[] = [\n      { x: this.x, y: this.y },\n      { x: this.x + this.width, y: this.y },\n      { x: this.x + this.width, y: this.y + this.height },\n      { x: this.x, y: this.y + this.height },\n      { x: this.x, y: this.y },\n    ];\n    return pointInRegionWN(p, pointList);\n  }\n\n  toJSON() {\n    const d = {\n      name: this.name,\n      type: this.type,\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n      visible: this.visible,\n      style: this.style,\n      transform: this.transform,\n    };\n    return d;\n  }\n\n  getBoundingBox() {\n    const boundingBox = new BoundingBox(\n      this.x,\n      this.y,\n      this.width,\n      this.height,\n      _.clone(this.transform)\n    );\n    return boundingBox;\n  }\n\n  setBounding<K extends keyof IBoundingRect>(key: K, value: IBoundingRect[K]) {\n    switch (key) {\n      case \"x\": {\n        const currentX = this.getBoundingBox().getTransformed().x;\n        const m = createTranslateMatrix(value - currentX, 0);\n        this.transform.multiply(m, \"left\");\n        this.emitBoundingChangeEvent();\n        break;\n      }\n\n      case \"y\": {\n        const currentY = this.getBoundingBox().getTransformed().y;\n        const m = createTranslateMatrix(0, value - currentY);\n        this.transform.multiply(m, \"left\");\n        this.emitBoundingChangeEvent();\n        break;\n      }\n\n      case \"width\": {\n        this.width = value;\n        this.emitBoundingChangeEvent();\n        break;\n      }\n\n      case \"height\": {\n        this.height = value;\n        this.emitBoundingChangeEvent();\n        break;\n      }\n\n      default:\n        break;\n    }\n  }\n\n  setRotate(angle: number) {\n    const shouldRotateAngle = angle - this.rotation;\n    if (Math.abs(shouldRotateAngle) > Number.EPSILON) {\n      this.rotate(shouldRotateAngle);\n      this.rotation = angle % (2 * Math.PI);\n    }\n  }\n\n  rotate(angle: number, center?: IPoint) {\n    if (!center) {\n      const centerPointVec: Vec3 = [\n        this.x + this.width / 2,\n        this.y + this.height / 2,\n        1,\n      ];\n      const [x, y] = multiply(\n        this.transform.toMatrix(),\n        centerPointVec\n      ).toArray() as number[];\n      center = {\n        x,\n        y,\n      };\n    }\n    const tx = center.x;\n    const ty = center.y;\n    const m = multiMatrixMultiply(\n      createTranslateMatrix(tx, ty),\n      createRotateMatrix(angle),\n      createTranslateMatrix(-tx, -ty)\n    );\n    this.transform.multiply(m, \"left\");\n    this.emitBoundingChangeEvent();\n  }\n\n  private emitBoundingChangeEvent() {\n    this.emit(\"boundingChange\", { type: \"boundingChange\", target: this });\n  }\n}\n\n// export class Ellipse extends Element {\n//   constructor(\n//     public cx: number,\n//     public cy: number,\n//     public rx: number,\n//     public ry: number\n//   ) {\n//     super();\n//   }\n//   render() {}\n\n// }\n\n// export class Polygon extends Element {\n//   constructor(public points: Array<{ x: number; y: number }>) {\n//     super();\n//   }\n//   render() {}\n\n// }\n\n// export class Line extends Element {\n//   constructor(\n//     public x1: number,\n//     public y1: number,\n//     public x2: number,\n//     public y2: number\n//   ) {\n//     super();\n//   }\n//   render() {}\n// }\n\n// export class Path extends Element {\n//   constructor(public path: string) {\n//     super();\n//   }\n//   render() {}\n// }\n","import { Rectangle } from \"./draw/shape\";\nimport { FillStyle, LinearGradient, StrokeStyle } from \"./draw/style\";\nimport { degree2Radian } from \"./draw/utils\";\nimport { CanvasStore } from \"./stores/canvas\";\n\nexport const setUpDevelopmentInitialCanvasStore = (\n  canvasStore: CanvasStore\n) => {\n  // TODO: del\n  // del start\n\n  // Rectangle 2\n  const rect2 = new Rectangle(0, 0, 89, 80);\n  rect2.name = \"Rectangle 2\";\n  rect2.transform.tx = 60;\n  rect2.transform.ty = 106;\n  const fillStyle2 = new FillStyle();\n  fillStyle2.setColor(\"rgb(131, 23, 239)\");\n  fillStyle2.type = \"solid\";\n  const strokeStyle2 = new StrokeStyle();\n  strokeStyle2.type = \"solid\";\n  strokeStyle2.setColor(\"rgb(112,112,112)\");\n  rect2.style.stroke = strokeStyle2;\n  rect2.style.fill = fillStyle2;\n  canvasStore.gRender?.add(rect2);\n\n  // Rectangle 4\n  const rect4 = new Rectangle(0, 0, 105, 80);\n  rect4.name = \"Rectangle 4\";\n  const fillStyle4 = new FillStyle();\n  fillStyle4.type = \"gradient\";\n  const lg4 = new LinearGradient(1, 0.39614754915237427, 0, 0.5);\n  lg4.addColorStop(0, \"rgb(23,181,239)\");\n  lg4.addColorStop(1, \"rgb(120,12,19)\");\n  fillStyle4.gradient = lg4;\n  const strokeStyle4 = new StrokeStyle();\n  strokeStyle4.type = \"solid\";\n  strokeStyle4.setColor(\"rgb(112,112,112)\");\n  rect4.style.stroke = strokeStyle4;\n  rect4.style.fill = fillStyle4;\n  canvasStore.gRender?.add(rect4);\n\n  // Rectangle 3\n  const rect3 = new Rectangle(0, 0, 89, 80);\n  rect3.name = \"Rectangle 3\";\n  rect3.rotation = degree2Radian(-31);\n  rect3.transform.tx = 45.75453186035156;\n  rect3.transform.ty = 257.63250732421875;\n  rect3.transform.a = 0.8571673035621643;\n  rect3.transform.b = -0.5150380730628967;\n  rect3.transform.c = 0.5150380730628967;\n  rect3.transform.d = 0.8571673035621643;\n  const fillStyle3 = new FillStyle();\n  fillStyle3.setColor(\"rgb(131, 23, 239)\");\n  fillStyle3.type = \"solid\";\n  const strokeStyle3 = new StrokeStyle();\n  strokeStyle3.type = \"solid\";\n  strokeStyle3.setColor(\"rgb(112,112,112)\");\n  rect3.style.stroke = strokeStyle3;\n  rect3.style.fill = fillStyle3;\n  canvasStore.gRender?.add(rect3);\n\n  // Rectangle 5\n  const rect5 = new Rectangle(0, 0, 105, 80);\n  rect5.name = \"Rectangle 5\";\n  rect5.rotation = degree2Radian(-62);\n  rect5.transform.tx = 180.5348358154297;\n  rect5.transform.ty = 113.57588958740234;\n  rect5.transform.a = 0.4694715738296509;\n  rect5.transform.b = -0.882947564125061;\n  rect5.transform.c = 0.882947564125061;\n  rect5.transform.d = 0.4694715738296509;\n  const fillStyle5 = new FillStyle();\n  fillStyle5.type = \"gradient\";\n  const lg5 = new LinearGradient(1, 0.39614754915237427, 0, 0.5);\n  lg5.addColorStop(0, \"rgb(23,181,239)\");\n  lg5.addColorStop(1, \"rgb(120,12,19)\");\n  fillStyle5.gradient = lg5;\n  const strokeStyle5 = new StrokeStyle();\n  strokeStyle5.type = \"solid\";\n  strokeStyle5.setColor(\"rgb(112,112,112)\");\n  rect5.style.stroke = strokeStyle5;\n  rect5.style.fill = fillStyle5;\n  canvasStore.gRender?.add(rect5);\n\n  // TODO: del\n  // del end\n};\n","import { makeObservable, observable, runInAction } from \"mobx\";\n\nimport { MouseEventButton } from \"../constants\";\nimport { Element } from \"../draw/element\";\nimport { GRender } from \"../draw/gRender\";\nimport { setUpDevelopmentInitialCanvasStore } from \"../initialState\";\n\nexport class CanvasStore {\n  gRender?: GRender;\n  selectedElement?: Element;\n\n  constructor() {\n    makeObservable(this, {\n      selectedElement: observable,\n    });\n  }\n\n  initRender(element: HTMLElement) {\n    this.gRender = GRender.init(element);\n    this.gRender.setBackgroundColor(\"rgb(228,228,228)\");\n\n    setUpDevelopmentInitialCanvasStore(this);\n\n    this.gRender.on(\"mousedown\", (e) => {\n      if (e.browserMouseEvent.button === MouseEventButton.Main) {\n        runInAction(() => {\n          this.selectedElement = e.target;\n        });\n      }\n    });\n\n    this.gRender.on(\"resize\", (e) => {\n      this.render();\n    });\n\n    this.render();\n  }\n\n  render() {\n    if (!this.gRender) return;\n    this.gRender?.render();\n  }\n}\n","import { makeAutoObservable } from \"mobx\";\n\nimport { MouseEventButton } from \"../constants\";\n\nexport class CanvasMouseStore {\n  containerDomElement?: HTMLElement;\n\n  mouseButton?: MouseEventButton;\n  isMouseDown: boolean = false;\n  isMouseMoving: boolean = false;\n\n  mouseDownX?: number;\n  mouseDownY?: number;\n\n  currentMouseX: number = 0;\n  currentMouseY: number = 0;\n\n  mouseUpX?: number;\n  mouseUpY?: number;\n\n  get isMainButtonDown() {\n    return this.mouseButton === MouseEventButton.Main && this.isMouseDown;\n  }\n\n  get isSecondaryButtonDown() {\n    return this.mouseButton === MouseEventButton.Secondary && this.isMouseDown;\n  }\n\n  get isAuxiliaryButtonDown() {\n    return this.mouseButton === MouseEventButton.Auxiliary && this.isMouseDown;\n  }\n\n  constructor() {\n    makeAutoObservable(this);\n  }\n\n  update(params: Partial<CanvasMouseStore>) {\n    Object.assign(this, params);\n  }\n}\n","export async function openFile(accept?: string): Promise<File | undefined> {\n  const elementId = \"__file_utils__open_file\";\n  return new Promise((resolve) => {\n    let fileInput: HTMLInputElement | null = document.querySelector(\n      `input#${elementId}`\n    );\n    if (fileInput) {\n      console.log(fileInput);\n      fileInput.remove();\n    }\n\n    fileInput = document.createElement(\"input\");\n    fileInput.setAttribute(\"id\", elementId);\n    fileInput.setAttribute(\"type\", \"file\");\n    fileInput.setAttribute(\"hidden\", \"\");\n    accept && fileInput.setAttribute(\"accept\", accept);\n    document.body.appendChild(fileInput);\n    fileInput.click();\n    fileInput.addEventListener(\"change\", () => {\n      resolve(fileInput?.files?.[0]);\n    });\n  });\n}\n\nexport async function openFiles(accept?: string): Promise<FileList | null> {\n  const elementId = \"__file_utils__open_files\";\n  return new Promise((resolve) => {\n    let fileInput: HTMLInputElement | null = document.querySelector(\n      `input#${elementId}`\n    );\n    if (fileInput) {\n      fileInput.remove();\n    }\n\n    fileInput = document.createElement(\"input\");\n    fileInput.setAttribute(\"id\", elementId);\n    fileInput.setAttribute(\"type\", \"file\");\n    fileInput.setAttribute(\"hidden\", \"\");\n    accept && fileInput.setAttribute(\"accept\", accept);\n    document.body.appendChild(fileInput);\n    fileInput.click();\n    fileInput.addEventListener(\"change\", () => {\n      resolve(fileInput?.files);\n    });\n  });\n}\n","import JSZip from \"jszip\";\n\nimport { openFile } from \"../utils/fileUtils\";\n\nconst zip = new JSZip();\n\nconst artboardFileNameRegexp = /^artwork\\/artboard-([\\w | -]+)\\/(.+)(graphicContent\\.agc)/;\n\nexport class ProjectStore {\n  async loadXDFile() {\n    const xdProjectFile = await openFile(\".xd\");\n    if (!xdProjectFile) return;\n    const xdProjectData = await zip.loadAsync(xdProjectFile);\n    console.log(xdProjectData);\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    for (const [xdProjectFilePath, xdProjectFileInfo] of Object.entries(\n      xdProjectData.file\n    )) {\n      if (artboardFileNameRegexp.test(xdProjectFilePath)) {\n      }\n    }\n  }\n}\n","import React from \"react\";\n\nimport { CanvasStore } from \"./stores/canvas\";\nimport { CanvasMouseStore } from \"./stores/canvasMouse\";\nimport { ProjectStore } from \"./stores/project\";\nimport { UserInterfaceStore } from \"./stores/userInterface\";\n\nexport const globalStores = {\n  uiStore: new UserInterfaceStore(),\n  projectStore: new ProjectStore(),\n  canvasStore: new CanvasStore(),\n  canvasMouseStore: new CanvasMouseStore(),\n};\n\nexport const storesContext = React.createContext(globalStores);\n\n// @ts-ignore\nwindow.__MOBX_STORE__ = globalStores;\n","import { makeAutoObservable } from \"mobx\";\nimport { DesignTool, OtherTool } from \"../constants\";\n\nexport class UserInterfaceStore {\n  showMenuDrawer: boolean = false;\n\n  showRenameModal: boolean = false;\n\n  selectedDesignTool: DesignTool = DesignTool.Select;\n  selectedOtherTool?: OtherTool;\n\n  constructor() {\n    makeAutoObservable(this);\n  }\n}\n","import { reaction } from \"mobx\";\n\nimport { DesignTool } from \"../constants\";\nimport { globalStores } from \"../contexts\";\nimport { Rectangle } from \"../draw/shape\";\n\nconst { uiStore, canvasStore, canvasMouseStore } = globalStores;\n\nlet creatingRect: Rectangle | null = null;\n\nreaction(\n  () => {\n    return {\n      selectedDesignTool: uiStore.selectedDesignTool,\n      ...canvasMouseStore,\n    };\n  },\n  (d) => {\n    if (d.selectedDesignTool !== DesignTool.Rectangle || !d.isMouseDown) {\n      if (creatingRect) {\n        creatingRect = null;\n      }\n      return;\n    }\n\n    const { mouseDownX, mouseDownY, currentMouseX, currentMouseY } = d;\n\n    const x = Math.min(mouseDownX!, currentMouseX);\n    const y = Math.min(mouseDownY!, currentMouseY);\n    const width = Math.abs(mouseDownX! - currentMouseX);\n    const height = Math.abs(mouseDownY! - currentMouseY);\n\n    if (!creatingRect) {\n      creatingRect = new Rectangle(0, 0, width, height);\n\n      creatingRect.style.fill.type = \"solid\";\n      creatingRect.style.fill.setColor(\"#fff\");\n      creatingRect.style.stroke.setColor(\"#707070\");\n      creatingRect.style.stroke.type = \"solid\";\n      creatingRect.transform.tx = x;\n      creatingRect.transform.ty = y;\n      canvasStore.gRender?.add(creatingRect);\n      canvasStore.selectedElement = creatingRect;\n    } else {\n      creatingRect.updateTransform({\n        tx: x,\n        ty: y,\n      });\n      creatingRect.width = width;\n      creatingRect.height = height;\n    }\n    canvasStore.render();\n  }\n);\n","import { reaction } from \"mobx\";\n\nimport { DesignTool, MouseEventButton } from \"../constants\";\nimport { globalStores } from \"../contexts\";\nimport { BoundingBox } from \"../draw/shape\";\n\nconst { uiStore, canvasStore, canvasMouseStore } = globalStores;\n\nlet elementBoundingBox: BoundingBox | null = null;\n\nreaction(\n  () => {\n    return {\n      selectedDesignTool: uiStore.selectedDesignTool,\n      selectedElement: canvasStore.selectedElement,\n      mouseButton: canvasMouseStore.mouseButton,\n      mouseDownX: canvasMouseStore.mouseDownX,\n      mouseDownY: canvasMouseStore.mouseDownY,\n      currentMouseX: canvasMouseStore.currentMouseX,\n      currentMouseY: canvasMouseStore.currentMouseY,\n      isMouseDown: canvasMouseStore.isMouseDown,\n    };\n  },\n  (d) => {\n    if (\n      d.selectedDesignTool !== DesignTool.Select ||\n      !d.isMouseDown ||\n      !d.selectedElement ||\n      d.mouseButton !== MouseEventButton.Main\n    ) {\n      elementBoundingBox = null;\n      return;\n    }\n\n    const {\n      mouseDownX,\n      mouseDownY,\n      currentMouseX,\n      currentMouseY,\n      selectedElement,\n    } = d;\n    if (!elementBoundingBox) {\n      elementBoundingBox = selectedElement.getBoundingBox();\n    }\n\n    if (\n      Math.abs(currentMouseX - mouseDownX!) > Number.EPSILON ||\n      Math.abs(currentMouseY - mouseDownY!) > Number.EPSILON\n    ) {\n      const dx = mouseDownX! - elementBoundingBox.transform.tx;\n      const dy = mouseDownY! - elementBoundingBox.transform.ty;\n\n      const targetX = currentMouseX - dx;\n      const targetY = currentMouseY - dy;\n\n      selectedElement.updateTransform({\n        tx: targetX,\n        ty: targetY,\n      });\n\n      canvasStore.render();\n    }\n  }\n);\n","import React from \"react\";\nimport { storesContext } from \"../contexts\";\n\nexport const useStores = () => React.useContext(storesContext);\n","import styled, { CreateStyled } from '@emotion/styled';\nimport { ITheme } from './theme';\n\nexport default styled as CreateStyled<ITheme>;\n","import { observer } from \"mobx-react\";\nimport React from \"react\";\n\nimport { useStores } from \"../../hooks/useStores\";\nimport styled from \"../../styles/styled\";\n\nconst Root = styled.div`\n  pointer-events: none;\n  display: inline-block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  background: #fff;\n  border: 1px solid #000;\n`;\n\nconst PositionTip = () => {\n  const { canvasMouseStore } = useStores();\n  return (\n    <Root>\n      x: {canvasMouseStore.currentMouseX}\n      <br />\n      y: {canvasMouseStore.currentMouseY}\n    </Root>\n  );\n};\n\nexport default observer(PositionTip);\n","import { observer } from \"mobx-react\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { Element } from \"../../draw/element\";\nimport { IElementEvent } from \"../../draw/events\";\nimport { IBoundingRect } from \"../../draw/shape\";\nimport { radian2Degree } from \"../../draw/utils\";\nimport { useStores } from \"../../hooks/useStores\";\nimport styled from \"../../styles/styled\";\n\ntype ResizeEdge =\n  | \"n\"\n  | \"e\"\n  | \"s\"\n  | \"w\"\n  | \"ne\"\n  | \"nw\"\n  | \"se\"\n  | \"sw\"\n  | \"ew\"\n  | \"ns\";\n\nconst Root = styled.div`\n  position: absolute;\n  box-sizing: border-box;\n  transform-origin: top left;\n  outline: 1px solid ${({ theme }) => theme.palette.primary};\n`;\n\nconst getControlPointPositionStyle = (edge: ResizeEdge): string => {\n  switch (edge) {\n    case \"nw\":\n      return `\n        cursor: nwse-resize;\n        top: -5px;\n        left: -5px;\n      `;\n    case \"n\":\n      return `\n        cursor: n-resize;\n        top: -5px;\n        left: calc(50% - 4px);\n      `;\n    case \"ne\":\n      return `\n        cursor: nesw-resize;\n        top: -5px;\n        right: -5px;\n      `;\n    case \"e\":\n      return `\n        cursor: ew-resize;\n        top: calc(50% - 4px);\n        right: -5px;\n      `;\n    case \"se\":\n      return `\n        cursor: nwse-resize;\n        bottom: -5px;\n        right: -5px;\n      `;\n    case \"s\":\n      return `\n        cursor: ns-resize;\n        bottom: -5px;\n        left: calc(50% - 4px);\n      `;\n    case \"sw\":\n      return `\n        cursor: nesw-resize;\n        bottom: -5px;\n        left: -5px;\n      `;\n    case \"w\":\n      return `\n        cursor: ew-resize;\n        top: calc(50% - 4px);\n        left: -5px;\n      `;\n    default:\n      return \"\";\n  }\n};\n\nconst ControlPoint = styled.div<{ resizeEdge: ResizeEdge }>`\n  position: absolute;\n  pointer-events: none;\n  width: 8px;\n  height: 8px;\n  ${({ resizeEdge }) => getControlPointPositionStyle(resizeEdge)}\n  border: 1px solid ${({ theme }) => theme.palette.primary};\n  border-radius: 50%;\n  background-color: #fff;\n\n  &:hover {\n    background-color: ${({ theme }) => theme.palette.primary};\n  }\n\n  /* &::after {\n    position: absolute;\n    content: \"\";\n    display: block;\n    cursor: s-resize;\n    width: 5px;\n    height: 5px;\n    background: red;\n    right: 2px;\n  } */\n`;\n\nconst calculateBoundingRect = (element: Element): IBoundingRect => {\n  const currentBoundingBox = element.getBoundingBox();\n  const t = currentBoundingBox.getTransformed();\n  const boundingRect: IBoundingRect = {\n    x: currentBoundingBox.transform.tx + currentBoundingBox.x,\n    y: currentBoundingBox.transform.ty + currentBoundingBox.y,\n    width: t.width,\n    height: t.height,\n  };\n  return boundingRect;\n};\n\nconst ResizeAndRotate = () => {\n  const { canvasStore } = useStores();\n  const selectedEdgeRef = useRef<ResizeEdge | null>(null);\n\n  const { selectedElement } = canvasStore;\n  const [boundingRect, setBoundingRect] = useState<IBoundingRect | undefined>();\n\n  useEffect(() => {\n    const handleBoundingChange = (e: IElementEvent) => {\n      setBoundingRect(calculateBoundingRect(e.target));\n    };\n    if (selectedElement) {\n      setBoundingRect(calculateBoundingRect(selectedElement));\n      selectedElement.on(\"boundingChange\", handleBoundingChange);\n      return () => {\n        selectedElement.off(\"boundingChange\", handleBoundingChange);\n      };\n    }\n  }, [selectedElement]);\n\n  if (!selectedElement) return null;\n\n  const handleOnDrag = (e: React.MouseEvent) => {\n    // const rect = canvasMouseStore.containerDomElement!.getBoundingClientRect();\n    // canvasMouseStore.update({\n    //   isMouseMoving: true,\n    //   currentMouseX: e.clientX - rect.x,\n    //   currentMouseY: e.clientY - rect.y,\n    // });\n  };\n\n  const handleDragEnd = (e: React.MouseEvent) => {\n    // selectedEdgeRef.current = null;\n    // canvasMouseStore.update({\n    //   isMouseDown: false,\n    // });\n  };\n\n  return (\n    <Root\n      style={{\n        left: 0,\n        top: 0,\n        width: boundingRect?.width,\n        height: boundingRect?.height,\n        transform: `translate(${boundingRect?.x}px, ${\n          boundingRect?.y\n        }px) rotate(${radian2Degree(selectedElement.rotation ?? 0)}deg)`,\n        transformOrigin: \"top left\",\n        willChange: \"transform\",\n      }}\n    >\n      <ControlPoint\n        resizeEdge=\"nw\"\n        draggable\n        onDragStart={() => {\n          console.log(\"dddstart\");\n          selectedEdgeRef.current = \"nw\";\n        }}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n      <ControlPoint\n        resizeEdge=\"n\"\n        draggable\n        onDragStart={(e) => {\n          selectedEdgeRef.current = \"n\";\n        }}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n      <ControlPoint\n        resizeEdge=\"ne\"\n        draggable\n        onDragStart={(e) => {\n          selectedEdgeRef.current = \"ne\";\n        }}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n      <ControlPoint\n        resizeEdge=\"e\"\n        draggable\n        onDragStart={(e) => {\n          selectedEdgeRef.current = \"e\";\n        }}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n      <ControlPoint\n        resizeEdge=\"se\"\n        draggable\n        onDragStart={(e) => {\n          selectedEdgeRef.current = \"se\";\n        }}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n      <ControlPoint\n        resizeEdge=\"s\"\n        draggable\n        onDragStart={(e) => {\n          selectedEdgeRef.current = \"w\";\n        }}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n      <ControlPoint\n        resizeEdge=\"sw\"\n        draggable\n        onDragStart={(e) => {\n          selectedEdgeRef.current = \"sw\";\n        }}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n      <ControlPoint\n        resizeEdge=\"w\"\n        draggable\n        onDragStart={(e) => {\n          selectedEdgeRef.current = \"w\";\n        }}\n        onDrag={handleOnDrag}\n        onDragEnd={handleDragEnd}\n      />\n    </Root>\n  );\n};\n\nexport default observer(ResizeAndRotate);\n","import { observer } from \"mobx-react\";\nimport React from \"react\";\n\nimport { DesignTool, MouseEventButton } from \"../../constants\";\nimport { useStores } from \"../../hooks/useStores\";\nimport styled from \"../../styles/styled\";\n\nconst Root = styled.div`\n  position: absolute;\n  border: 1px solid #fff;\n  overflow: hidden;\n\n  &::after {\n    content: \"\";\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: ${({ theme }) => theme.palette.primary};\n    opacity: 0.2;\n  }\n`;\n\nconst Selection = () => {\n  const { uiStore, canvasMouseStore, canvasStore } = useStores();\n\n  if (\n    uiStore.selectedDesignTool !== DesignTool.Select ||\n    !canvasMouseStore.isMouseDown ||\n    canvasMouseStore.mouseButton !== MouseEventButton.Main ||\n    (canvasMouseStore.isMouseDown && canvasStore.selectedElement)\n  ) {\n    return null;\n  }\n\n  const {\n    mouseDownX,\n    mouseDownY,\n    currentMouseX,\n    currentMouseY,\n  } = canvasMouseStore;\n\n  const left = Math.min(mouseDownX!, currentMouseX);\n  const top = Math.min(mouseDownY!, currentMouseY);\n  const width = Math.abs(mouseDownX! - currentMouseX);\n  const height = Math.abs(mouseDownY! - currentMouseY);\n\n  return (\n    <Root\n      style={{\n        left,\n        top,\n        width,\n        height,\n      }}\n    ></Root>\n  );\n};\n\nexport default observer(Selection);\n","import { runInAction } from \"mobx\";\nimport React, { useEffect, useRef } from \"react\";\n\nimport { useStores } from \"../hooks/useStores\";\nimport styled from \"../styles/styled\";\nimport PositionTip from \"./canvas-controls/PositionTip\";\nimport ResizeAndRotate from \"./canvas-controls/ResizeAndRotate\";\nimport Selection from \"./canvas-controls/Selection\";\n\nconst Root = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1;\n`;\n\nconst OperationLayer = styled.div`\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n`;\n\nconst Canvas = () => {\n  const { canvasStore, canvasMouseStore } = useStores();\n  const canvasContainerRef = useRef<HTMLDivElement>(null);\n  const operationLayerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    canvasStore.initRender(canvasContainerRef.current!);\n    runInAction(() => {\n      canvasMouseStore.containerDomElement = canvasContainerRef.current!;\n    });\n  }, [canvasMouseStore, canvasStore]);\n\n  useEffect(() => {\n    let mouseMoveDetectTimer: ReturnType<typeof setTimeout>;\n    const handleMouseMove = (e: MouseEvent) => {\n      const rect = operationLayerRef.current!.getBoundingClientRect();\n\n      canvasMouseStore.update({\n        isMouseMoving: true,\n        currentMouseX: e.clientX - rect.x,\n        currentMouseY: e.clientY - rect.y,\n      });\n      mouseMoveDetectTimer && clearTimeout(mouseMoveDetectTimer);\n      mouseMoveDetectTimer = setTimeout(() => {\n        canvasMouseStore.update({\n          isMouseMoving: false,\n        });\n      }, 500);\n    };\n    const handleMouseUp = (e: MouseEvent) => {\n      const rect = operationLayerRef.current!.getBoundingClientRect();\n\n      canvasMouseStore.update({\n        isMouseDown: false,\n        isMouseMoving: false,\n        mouseButton: e.button,\n        mouseUpX: e.clientX - rect.x,\n        mouseUpY: e.clientY - rect.y,\n      });\n    };\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"mouseup\", handleMouseUp);\n\n    return () => {\n      mouseMoveDetectTimer && clearTimeout(mouseMoveDetectTimer);\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [canvasMouseStore]);\n\n  return (\n    <Root\n      onMouseDown={(e) => {\n        const rect = operationLayerRef.current!.getBoundingClientRect();\n        canvasMouseStore.update({\n          isMouseDown: true,\n          isMouseMoving: false,\n          mouseButton: e.button,\n          mouseDownX: e.clientX - rect.x,\n          mouseDownY: e.clientY - rect.y,\n        });\n      }}\n      ref={canvasContainerRef}\n    >\n      <OperationLayer ref={operationLayerRef}>\n        <Selection></Selection>\n        <ResizeAndRotate></ResizeAndRotate>\n        <PositionTip />\n      </OperationLayer>\n    </Root>\n  );\n};\n\nexport default Canvas;\n","import { Divider } from \"@adobe/react-spectrum\";\nimport ShowMenuIcon from \"@spectrum-icons/workflow/ShowMenu\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\n\nimport { useStores } from \"../hooks/useStores\";\nimport styled from \"../styles/styled\";\n\nconst MenuDrawerRoot = styled.div`\n  display: ${(props) => (props.hidden ? \"none\" : \"block\")};\n  position: fixed;\n  z-index: 9999;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  transform: translateX(-100%);\n  transition: transform 0.2s ease;\n  &.show {\n    transform: translateX(0);\n  }\n`;\n\nconst MenuDrawer = styled.div`\n  display: flex;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  font-size: 12px;\n  /* color: #000; */\n  background-color: ${({ theme }) => theme.palette.background.default};\n`;\n\nconst ListRoot = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 285px;\n  height: 100%;\n`;\n\nconst ListItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n  cursor: pointer;\n  align-items: center;\n  height: 40px;\n  padding: 0 15px;\n\n  &:hover {\n    background-color: ${({ theme }) => theme.palette.background.hover};\n  }\n`;\n\nconst ListHeader = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 0 15px;\n  height: 40px;\n  margin-bottom: 10px;\n`;\n\nconst ListContent = styled.div`\n  flex: 1;\n  overflow: auto;\n`;\n\nconst MenuButtonWrapper = styled.div`\n  display: inherit;\n`;\n\nconst Menu = () => {\n  const { uiStore, projectStore } = useStores();\n  return (\n    <>\n      <MenuButtonWrapper\n        onClick={() => {\n          uiStore.showMenuDrawer = !uiStore.showMenuDrawer;\n        }}\n      >\n        <ShowMenuIcon size=\"S\" />\n      </MenuButtonWrapper>\n\n      <MenuDrawerRoot\n        className={uiStore.showMenuDrawer ? \"show\" : \"\"}\n        onClick={() => {\n          uiStore.showMenuDrawer = false;\n        }}\n      >\n        <MenuDrawer onClick={(e) => e.stopPropagation()}>\n          <ListRoot>\n            <ListHeader>\n              <MenuButtonWrapper\n                onClick={() =>\n                  (uiStore.showMenuDrawer = !uiStore.showMenuDrawer)\n                }\n              >\n                <ShowMenuIcon size=\"S\" />\n              </MenuButtonWrapper>\n            </ListHeader>\n            <ListContent>\n              <ListItem onClick={() => window.open(window.location.origin)}>\n                <div>New</div>\n                <div>Ctrl + N</div>\n              </ListItem>\n              <ListItem\n                onClick={() => {\n                  projectStore.loadXDFile();\n                }}\n              >\n                <div>Open</div>\n                <div>Ctrl + O</div>\n              </ListItem>\n              <ListItem>\n                <div>Rename your document</div>\n              </ListItem>\n            </ListContent>\n          </ListRoot>\n          <Divider orientation=\"vertical\" size=\"M\" />\n        </MenuDrawer>\n      </MenuDrawerRoot>\n    </>\n  );\n};\n\nexport default observer(Menu);\n","import HomeIcon from \"@spectrum-icons/workflow/Home\";\nimport React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport styled from \"../styles/styled\";\nimport Menu from \"./Menu\";\n\nconst Root = styled.div`\n  cursor: pointer;\n  width: 100%;\n  height: 40px;\n  font-size: 13px;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: auto;\n`;\n\nconst LeftActions = styled.div`\n  grid-column: 1 / 2;\n  grid-row: 1;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  height: 100%;\n`;\n\nconst LeftActionItem = styled.div`\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  margin: 0 16px;\n`;\n\nconst CenterActions = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  grid-column: 2 / 3;\n  grid-row: 1;\n`;\n\nconst RightActions = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  grid-column: 3 / 4;\n  grid-row: 1;\n`;\n\nconst NavItem = styled(NavLink)`\n  color: ${({ theme }) => theme.palette.text.label};\n  position: relative;\n  height: 100%;\n  box-sizing: border-box;\n  text-decoration: none;\n  line-height: 40px;\n\n  &.active {\n    color: ${({ theme }) => theme.palette.text.primary};\n  }\n  &.active::before {\n    content: \" \";\n    display: block;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    height: 2px;\n    width: 100%;\n    background: ${({ theme }) => theme.palette.text.primary};\n  }\n`;\n\nconst Header = () => {\n  return (\n    <Root>\n      <LeftActions>\n        <LeftActionItem>\n          <Menu />\n        </LeftActionItem>\n        <LeftActionItem onClick={() => window.open(window.location.origin)}>\n          <HomeIcon size=\"S\" />\n        </LeftActionItem>\n        <LeftActionItem>\n          <NavItem to=\"/design\" activeClassName=\"active\">\n            Design\n          </NavItem>\n        </LeftActionItem>\n        <LeftActionItem>\n          <NavItem to=\"/prototype\" activeClassName=\"active\">\n            Prototype\n          </NavItem>\n        </LeftActionItem>\n        <LeftActionItem>\n          <NavItem to=\"/share\" activeClassName=\"active\">\n            Share\n          </NavItem>\n        </LeftActionItem>\n      </LeftActions>\n      <CenterActions>XD Tutorial</CenterActions>\n      <RightActions>6.3%</RightActions>\n    </Root>\n  );\n};\n\nexport default Header;\n","import { TextField } from \"@adobe/react-spectrum\";\nimport { SpectrumTextFieldProps } from \"@react-types/textfield\";\nimport React, { useEffect, useState } from \"react\";\n\nexport interface IInputNumberProps {\n  autoSelect?: boolean;\n  addonAfter?: string;\n}\n\nconst Input: React.FC<SpectrumTextFieldProps & IInputNumberProps> = (props) => {\n  const {\n    autoSelect,\n    addonAfter,\n    value,\n    onChange,\n    onFocus,\n    onBlur,\n    ...restProps\n  } = props;\n\n  const [displayValue, setDisplayValue] = useState<string | undefined>(\"\");\n  const [isFocus, setIsFocus] = useState(false);\n\n  useEffect(() => {\n    if (isFocus) {\n      setDisplayValue(value);\n    } else {\n      const v = addonAfter ? value + addonAfter : value;\n      setDisplayValue(v);\n    }\n  }, [value, addonAfter, isFocus]);\n\n  const handleOnFocus = (e: React.FocusEvent) => {\n    const v = addonAfter\n      ? displayValue?.slice(0, -addonAfter.length)\n      : displayValue;\n    setDisplayValue(v);\n    if (autoSelect) {\n      const target = e.target;\n      setTimeout(() => {\n        // @ts-ignore\n        target.select?.();\n      }, 0);\n    }\n    onFocus?.(e);\n  };\n\n  const handleOnBlur = (e: React.FocusEvent) => {\n    setIsFocus(false);\n    const v = addonAfter ? displayValue + addonAfter : displayValue;\n    setDisplayValue(v);\n    onBlur?.(e);\n  };\n\n  const handleOnChange = (e: string) => {\n    // setIsFocus(true);\n    // const v = addonAfter ? e + addonAfter : e;\n    setDisplayValue(e);\n    onChange?.(e);\n  };\n\n  return (\n    <TextField\n      {...restProps}\n      onFocus={handleOnFocus}\n      onBlur={handleOnBlur}\n      onChange={handleOnChange}\n      value={displayValue}\n    />\n  );\n};\n\nexport default Input;\n","export const fRound = (n: number, precision: number = 2) => {\n  const scale = 10 * precision;\n  return Math.round(n * scale) / scale;\n};\n","import _ from \"lodash\";\nimport { runInAction } from \"mobx\";\nimport { observer, useLocalObservable } from \"mobx-react\";\nimport React, { useEffect } from \"react\";\n\nimport { IElementEvent } from \"../../draw/events\";\nimport { degree2Radian, radian2Degree } from \"../../draw/utils\";\nimport { useStores } from \"../../hooks/useStores\";\nimport styled from \"../../styles/styled\";\nimport Input from \"../common/Input\";\nimport { fRound } from \"../../utils/number\";\n\nconst Root = styled.div``;\n\nconst SizeAndPosition = () => {\n  const { canvasStore } = useStores();\n  const selectedElement = canvasStore.selectedElement;\n\n  const boundingRectInput = useLocalObservable(() => ({\n    x: \"0\",\n    y: \"0\",\n    width: \"0\",\n    height: \"0\",\n    rotate: \"0\",\n\n    update(k: string, v: string) {\n      _.set(this, k, v);\n    },\n  }));\n\n  useEffect(() => {\n    const handleBoundingChange = (e: IElementEvent) => {\n      const boundingBox = e.target.getBoundingBox().getTransformed();\n\n      runInAction(() => {\n        boundingRectInput.x = fRound(boundingBox.x).toString();\n        boundingRectInput.y = fRound(boundingBox.y).toString();\n        boundingRectInput.width = fRound(boundingBox.width).toString();\n        boundingRectInput.height = fRound(boundingBox.height).toString();\n      });\n    };\n    if (selectedElement) {\n      const boundingBox = selectedElement.getBoundingBox().getTransformed();\n\n      runInAction(() => {\n        boundingRectInput.x = fRound(boundingBox.x).toString();\n        boundingRectInput.y = fRound(boundingBox.y).toString();\n        boundingRectInput.width = fRound(boundingBox.width).toString();\n        boundingRectInput.height = fRound(boundingBox.height).toString();\n      });\n      selectedElement.on(\"boundingChange\", handleBoundingChange);\n      return () => {\n        selectedElement?.off(\"boundingChange\", handleBoundingChange);\n      };\n    }\n  }, [boundingRectInput, selectedElement]);\n\n  return (\n    <Root>\n      <Input\n        label=\"W\"\n        isQuiet\n        autoSelect\n        value={boundingRectInput.width.toString()}\n        onChange={(e) => boundingRectInput.update(\"width\", e)}\n        onBlur={(e) => {\n          const v = fRound(Number(boundingRectInput.width) || 0);\n          selectedElement?.setBounding(\"width\", v);\n          canvasStore.render();\n        }}\n      />\n      <Input\n        label=\"H\"\n        isQuiet\n        autoSelect\n        value={boundingRectInput.height.toString()}\n        onChange={(e) => boundingRectInput.update(\"height\", e)}\n        onBlur={(e) => {\n          const v = fRound(Number(boundingRectInput.height) || 0);\n          selectedElement?.setBounding(\"height\", v);\n          canvasStore.render();\n        }}\n      />\n      <Input\n        label=\"X\"\n        isQuiet\n        autoSelect\n        value={boundingRectInput.x.toString()}\n        onChange={(e) => boundingRectInput.update(\"x\", e)}\n        onBlur={(e) => {\n          const v = fRound(Number(boundingRectInput.x) || 0);\n          selectedElement?.setBounding(\"x\", v);\n          canvasStore.render();\n        }}\n      />\n      <Input\n        label=\"Y\"\n        isQuiet\n        autoSelect\n        value={boundingRectInput.y.toString()}\n        onChange={(e) => boundingRectInput.update(\"y\", e)}\n        onBlur={(e) => {\n          const v = fRound(Number(boundingRectInput.y) || 0);\n          selectedElement?.setBounding(\"y\", v);\n          canvasStore.render();\n        }}\n      />\n      <Input\n        label=\"R\"\n        isQuiet\n        autoSelect\n        value={radian2Degree(selectedElement?.rotation || 0).toString()}\n        onChange={(e) => {\n          boundingRectInput.update(\"rotate\", e);\n        }}\n        onBlur={(e) => {\n          const r = fRound(Number(boundingRectInput.rotate) % 360 || 0);\n          boundingRectInput.update(\"rotate\", r.toString());\n          const radian = degree2Radian(r);\n          selectedElement?.setRotate(radian);\n          canvasStore.render();\n        }}\n        addonAfter=\"°\"\n      />\n    </Root>\n  );\n};\n\nexport default observer(SizeAndPosition);\n","import { observer } from \"mobx-react\";\nimport React from \"react\";\nimport { useStores } from \"../hooks/useStores\";\nimport styled from \"../styles/styled\";\nimport SizeAndPosition from \"./property-edit/SizeAndPosition\";\n\nconst Root = styled.div`\n  flex: 1;\n  overflow: auto;\n`;\n\nconst PropertyEditor = () => {\n  const { canvasStore } = useStores();\n  return (\n    <Root>\n      <SizeAndPosition />\n      <pre>{JSON.stringify(canvasStore.selectedElement, null, 2)}</pre>\n    </Root>\n  );\n};\n\nexport default observer(PropertyEditor);\n","import ArtboardIcon from \"@spectrum-icons/workflow/Artboard\";\nimport EllipseIcon from \"@spectrum-icons/workflow/Ellipse\";\nimport LayersIcon from \"@spectrum-icons/workflow/Layers\";\nimport LineIcon from \"@spectrum-icons/workflow/Line\";\nimport AssetsIcon from \"@spectrum-icons/workflow/PaddingTop\";\nimport PolygonIcon from \"@spectrum-icons/workflow/Polygon\";\nimport RectangleIcon from \"@spectrum-icons/workflow/Rectangle\";\nimport ZoomIcon from \"@spectrum-icons/workflow/Search\";\nimport SelectIcon from \"@spectrum-icons/workflow/Select\";\nimport TextIcon from \"@spectrum-icons/workflow/Text\";\nimport VectorDrawIcon from \"@spectrum-icons/workflow/VectorDraw\";\nimport { runInAction } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\n\nimport { DesignTool, OtherTool } from \"../constants\";\nimport { useStores } from \"../hooks/useStores\";\nimport styled from \"../styles/styled\";\n\nconst Root = styled.div`\n  cursor: pointer;\n  width: 48px;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n`;\n\nconst ToolItem = styled.div<{ active: boolean }>`\n  width: 48px;\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ${({ theme, active }) => active && theme.palette.icon.informative};\n`;\n\nconst designToolsData = [\n  {\n    name: \"Select\",\n    value: DesignTool.Select,\n    icon: <SelectIcon size=\"S\" />,\n  },\n  {\n    name: \"Rectangle\",\n    value: DesignTool.Rectangle,\n    icon: <RectangleIcon size=\"S\" />,\n  },\n  {\n    name: \"Ellipse\",\n    value: DesignTool.Ellipse,\n    icon: <EllipseIcon size=\"S\" />,\n  },\n  {\n    name: \"Polygon\",\n    value: DesignTool.Polygon,\n    icon: <PolygonIcon size=\"S\" />,\n  },\n  {\n    name: \"Line\",\n    value: DesignTool.Line,\n    icon: <LineIcon size=\"S\" />,\n  },\n  {\n    name: \"Pen\",\n    value: DesignTool.Pen,\n    icon: <VectorDrawIcon size=\"S\" />,\n  },\n  {\n    name: \"Text\",\n    value: DesignTool.Text,\n    icon: <TextIcon size=\"S\" />,\n  },\n  {\n    name: \"Artboard\",\n    value: DesignTool.Artboard,\n    icon: <ArtboardIcon size=\"S\" />,\n  },\n  {\n    name: \"Zoom\",\n    value: DesignTool.Zoom,\n    icon: <ZoomIcon size=\"S\" />,\n  },\n];\n\nconst otherToolsData = [\n  {\n    name: \"Assets\",\n    value: OtherTool.Assets,\n    icon: <AssetsIcon size=\"S\" />,\n  },\n  {\n    name: \"Layers\",\n    value: OtherTool.Layers,\n    icon: <LayersIcon size=\"S\" />,\n  },\n];\n\nconst ToolBox = () => {\n  const { uiStore } = useStores();\n  return (\n    <Root>\n      <div>\n        {designToolsData.map((v) => (\n          <ToolItem\n            onClick={() => {\n              runInAction(() => {\n                uiStore.selectedDesignTool = v.value;\n              });\n            }}\n            active={v.value === uiStore.selectedDesignTool}\n            key={v.name}\n          >\n            {v.icon}\n          </ToolItem>\n        ))}\n      </div>\n      <div>\n        {otherToolsData.map((v) => (\n          <ToolItem\n            onClick={() => {\n              runInAction(() => {\n                if (v.value === uiStore.selectedOtherTool) {\n                  uiStore.selectedOtherTool = undefined;\n                } else {\n                  uiStore.selectedOtherTool = v.value;\n                }\n              });\n            }}\n            active={v.value === uiStore.selectedOtherTool}\n            key={v.name}\n          >\n            {v.icon}\n          </ToolItem>\n        ))}\n      </div>\n    </Root>\n  );\n};\n\nexport default observer(ToolBox);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Home = () => {\n  return (\n    <div>\n      <Link to=\"/design\">design</Link>\n    </div>\n  );\n};\n\nexport default Home;\n","type SemanticColor = {\n  informative: string;\n  negative: string;\n  notice: string;\n  positive: string;\n};\n\nexport interface ITheme {\n  palette: {\n    primary: string;\n    secondary: string;\n    background: {\n      default: string;\n      hover: string;\n    };\n    text: {\n      primary: string;\n      hover: string;\n      disabled: string;\n      label: string;\n      invalid: string;\n      selected: string;\n    };\n    icon: SemanticColor;\n  };\n}\n\nexport const defaultTheme: ITheme = {\n  palette: {\n    primary: \"var(--spectrum-global-color-blue-500)\",\n    secondary: \"var(--spectrum-global-color-red-600)\",\n    background: {\n      default: \"var(--spectrum-alias-background-color-default)\",\n      hover: \"var(--spectrum-alias-highlight-hover)\",\n    },\n    text: {\n      primary: \"var(--spectrum-alias-text-color)\",\n      hover: \"var(--spectrum-alias-text-color-hover)\",\n      label: \"var(--spectrum-alias-label-text-color)\",\n      disabled: \"var(--spectrum-alias-text-color-disabled)\",\n      invalid: \"var(--spectrum-alias-text-color-invalid)\",\n      selected: \"var(--spectrum-alias-text-color-selected)\",\n    },\n    icon: {\n      informative: \"var(--spectrum-semantic-informative-color-icon)\",\n      negative: \"var(--spectrum-semantic-negative-color-icon)\",\n      notice: \"var(--spectrum-semantic-notice-color-icon)\",\n      positive: \"var(--spectrum-semantic-positive-color-icon)\",\n    },\n  },\n};\n","import {\n  defaultTheme as spectrumDefaultTheme,\n  Divider,\n  Provider,\n} from \"@adobe/react-spectrum\";\nimport { ThemeProvider } from \"emotion-theming\";\nimport React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nimport Canvas from \"./components/Canvas\";\nimport Header from \"./components/Header\";\nimport PropertyEditor from \"./components/PropertyEditor\";\nimport ToolBox from \"./components/ToolBox\";\nimport Home from \"./pages/Home\";\nimport styled from \"./styles/styled\";\nimport { defaultTheme } from \"./styles/theme\";\n\nconst GridRoot = styled.div`\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: 50px auto 292px;\n  grid-template-rows: 42px auto;\n  /**\n  * prevent-content-from-expanding-grid-items\n  * @see https://stackoverflow.com/a/43312314/9642423\n  **/\n  min-height: 0;\n  min-width: 0;\n`;\n\nconst HeaderGridItem = styled.div`\n  grid-column: 1 / 4;\n  grid-row: 1;\n`;\n\nconst ToolBoxGridItem = styled.div`\n  display: flex;\n  grid-column: 1 / 2;\n  grid-row: 2 / 3;\n  overflow: hidden;\n`;\n\nconst CanvasGridItem = styled.div`\n  display: flex;\n  grid-column: 2 / 3;\n  grid-row: 2 / 3;\n  overflow: hidden;\n`;\n\nconst PropertyEditorGridItem = styled.div`\n  display: flex;\n  grid-column: 3 / 4;\n  grid-row: 2 / 3;\n  overflow: hidden;\n`;\n\nfunction App() {\n  return (\n    <ThemeProvider theme={defaultTheme}>\n      <Provider\n        theme={spectrumDefaultTheme}\n        width=\"100%\"\n        height=\"100%\"\n        locale=\"en-US\"\n        colorScheme=\"light\"\n      >\n        <Router>\n          <Switch>\n            <Route exact path=\"/\">\n              <Home />\n            </Route>\n            <Route>\n              <GridRoot>\n                <HeaderGridItem>\n                  <Header />\n                  <Divider size=\"M\" />\n                </HeaderGridItem>\n                <ToolBoxGridItem>\n                  <ToolBox />\n                  <Divider orientation=\"vertical\" size=\"M\" />\n                </ToolBoxGridItem>\n                <CanvasGridItem>\n                  <Canvas />\n                </CanvasGridItem>\n                <PropertyEditorGridItem>\n                  <Divider orientation=\"vertical\" size=\"M\" />\n                  <PropertyEditor />\n                </PropertyEditorGridItem>\n              </GridRoot>\n            </Route>\n          </Switch>\n        </Router>\n      </Provider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import \"./index.css\";\nimport \"./reactions/reactions\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\nimport { listenKeyboardEvents } from \"./keyboard\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nlistenKeyboardEvents();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import keyboardJS from \"keyboardjs\";\nimport { runInAction } from \"mobx\";\n\nimport { DesignTool, OtherTool } from \"./constants\";\nimport { globalStores } from \"./contexts\";\n\nexport function listenKeyboardEvents() {\n  keyboardJS.bind(\"v\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Select;\n    });\n  });\n\n  keyboardJS.bind(\"r\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Rectangle;\n    });\n  });\n\n  keyboardJS.bind(\"e\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Ellipse;\n    });\n  });\n\n  keyboardJS.bind(\"y\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Polygon;\n    });\n  });\n\n  keyboardJS.bind(\"l\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Line;\n    });\n  });\n\n  keyboardJS.bind(\"p\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Pen;\n    });\n  });\n\n  keyboardJS.bind(\"t\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Text;\n    });\n  });\n\n  keyboardJS.bind(\"a\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Artboard;\n    });\n  });\n\n  keyboardJS.bind(\"z\", () => {\n    runInAction(() => {\n      globalStores.uiStore.selectedDesignTool = DesignTool.Zoom;\n    });\n  });\n\n  keyboardJS.bind(\"ctrl + shift + y\", (e) => {\n    e?.preventDefault();\n    runInAction(() => {\n      globalStores.uiStore.selectedOtherTool =\n        globalStores.uiStore.selectedOtherTool === OtherTool.Assets\n          ? undefined\n          : OtherTool.Assets;\n    });\n  });\n\n  keyboardJS.bind(\"ctrl + y\", (e) => {\n    e?.preventDefault();\n    runInAction(() => {\n      globalStores.uiStore.selectedOtherTool =\n        globalStores.uiStore.selectedOtherTool === OtherTool.Layers\n          ? undefined\n          : OtherTool.Layers;\n    });\n  });\n\n  keyboardJS.bind(\"ctrl + n\", (e) => {\n    e?.preventDefault();\n    window.open(window.location.origin);\n  });\n\n  keyboardJS.bind(\"ctrl + o\", (e) => {\n    e?.preventDefault();\n    runInAction(() => {\n      globalStores.projectStore.loadXDFile();\n    });\n  });\n}\n\nexport function stopListenKeyboardEvents() {\n  keyboardJS.stop();\n}\n"],"sourceRoot":""}